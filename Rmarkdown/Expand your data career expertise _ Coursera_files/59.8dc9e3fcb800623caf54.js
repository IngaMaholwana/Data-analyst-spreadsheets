(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/jXm":function(module,exports){module.exports="https://coursera_assets.s3.amazonaws.com/images/936656fd1abe653421cc69c023df8848.svg"},"2Kkf":function(module,e,n){"use strict";var t=n("17x9"),a=n.n(t),i=n("MnCE"),r=n("8cuT"),o=n("k4cE"),s=n("i6HE"),c=n("E4RX"),d=Object(i.b)(Object(i.c)({executeAction:a.a.func.isRequired}),Object(r.a)(["CourseStore"],(function(e,n){var t=e.CourseStore,a=n.executeAction,i=t.getCourseId(),r=t.getCourseSlug();return{refreshCourseProgress:function(){a(s.b,{courseId:i}),a(c.a,{courseId:i,refreshProgress:!0}),a(o.a,{courseSlug:r,refetch:!0})}}})));e.a=d},"46xw":function(module,exports,e){e("j5nu")},"84CE":function(module,exports){module.exports="https://coursera_assets.s3.amazonaws.com/images/c48c9c9403686e86b0563fb4ea92fd18.svg"},IyUU:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateChatSession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateChatSessionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateChatSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146}};e.loc.source={body:"mutation AiCoach_CreateChatSession($input: AiCoach_CreateChatSessionInput!) {\n  AiCoach_CreateChatSession(input: $input) {\n    id\n    title\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_CreateChatSession=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_CreateChatSession")},J2jR:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachClipRecommendations"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ClipRecommendation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachMessageCourse"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partners"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"abbreviatedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:276}};n.loc.source={body:'#import "./aiCoachMessageCourseFragment.graphql"\n\nfragment AiCoachClipRecommendations on AiCoach_ClipRecommendation {\n  course {\n    ...AiCoachMessageCourse\n  }\n  partners {\n    abbreviatedName\n    name\n    logo\n  }\n  itemTitle\n  itemSlug\n  itemId\n  previewImage\n  duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wuXY").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachClipRecommendations=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachClipRecommendations")},P1ex:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatSessionsByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryChatSessionsByUserId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:299}};e.loc.source={body:"query AiCoach_ChatSessionsByUserId($userId: ID!, $limit: Int) {\n  AiCoach {\n    queryChatSessionsByUserId(userId: $userId, limit: $limit) {\n      elements {\n        createdAt\n        id\n        title\n        userId\n        status\n      }\n      pagination {\n        totalElements\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_ChatSessionsByUserId=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_ChatSessionsByUserId")},RNb2:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachReadingItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"readingDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachReadingItem on AiCoach_ReadingItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  readingDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachReadingItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachReadingItem")},X9Xi:function(module,e,n){"use strict";n.r(e);var t,a=n("pVnL"),i=n.n(a),r=n("VbXa"),o=n.n(r),s=n("VkAN"),c=n.n(s),d=n("OhL7"),l=n("q1tI"),u=n.n(l),m=n("17x9"),p=n.n(m),f=n("S+eF"),g=n.n(f),h=n("MnCE"),v=n("/ukj"),b=n("sQ/U"),k=n("Gok7"),C=n("TOZ3"),S=n("EBS+"),O=n("8cuT"),I=n("Y74u"),y=n("QILm"),w=n.n(y),j=n("fsL8"),x=n.n(j),E=n("yXPU"),N=n.n(E),A=n("J4zp"),T=n.n(A),M=n("/MKj"),R=n("DU3t"),F=n("ANjH"),P=n("lSNA"),L=n.n(P),D=n("3tO9"),B=n.n(D),createReducer=function(e,n,t){return e[t.type]?e[t.type](n,t):n},H=n("fNnY"),V={showChat:!1,isFullScreen:!1,disabledInput:!1,messageLoader:!1},U=L()(L()(L()(L()(L()(L()({},H.v,(function(e){return e.isFullScreen?B()(B()({},e),{},{showChat:!e.showChat,isFullScreen:!1}):B()(B()({},e),{},{showChat:!e.showChat})})),H.p,(function(e){return B()(B()({},e),{},{showChat:!0})})),H.f,(function(e){return B()(B()({},e),{},{showChat:!1})})),H.w,(function(e){return B()(B()({},e),{},{isFullScreen:!e.isFullScreen})})),H.x,(function(e,n){var t=n.isDisabled;return B()(B()({},e),{},{disabledInput:t})})),H.i,(function(e,n){var t=n.messageLoader;return B()(B()({},e),{},{messageLoader:t})})),q={inputText:""},z=L()({},H.u,(function(e,n){return B()(B()({},e),{},{inputText:n.inputText})})),G=n("RIqP"),W=n.n(G),Y=n("ntUh"),K=n("mtOI");function createNewMessage(e){var n=e.text,t=e.sender,a=e.id,i=e.clipRecommendations,r=e.userFeedback,o=e.timestamp,s=e.recommendedActions,c=e.action,d=e.navigationButtons;return{type:Y.b.TEXT,component:K.f,text:n,sender:t,timestamp:o?new Date(o):new Date,showAvatar:!0,customId:a,unread:t===Y.c.RESPONSE,clipRecommendations:i,userFeedback:r,recommendedActions:s,action:c,navigationButtons:d}}function createLinkSnippet(e,n){return{type:Y.b.SNIPPET.LINK,component:K.k,title:e.title,link:e.link,target:e.target||"_blank",sender:Y.c.RESPONSE,timestamp:new Date,showAvatar:!0,customId:n,unread:!0}}function createComponentMessage(e,n,t,a){return{type:Y.b.CUSTOM_COMPONENT,component:e,props:n,sender:Y.c.RESPONSE,timestamp:new Date,showAvatar:t,customId:a,unread:!0}}var Q={messages:[],chatSessionId:null,historicalMessagesMap:{},badgeCount:0},J=(t={},L()(L()(L()(L()(L()(L()(L()(L()(L()(L()(t,H.y,(function(e,n){var t=n.messages.map((function(e){return createNewMessage(e)}));return B()(B()({},e),{},{messages:t,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",t))})})),H.d,(function(e,n){var t=n.text,a=n.id,i=n.timestamp,r=n.action,o=[].concat(W()(e.messages),[createNewMessage({text:t,sender:Y.c.CLIENT,id:a,timestamp:i,action:r})]);return B()(B()({},e),{},{messages:o,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",o))})})),H.c,(function(e,n){var t=n.text,a=n.id,i=n.clipRecommendations,r=n.userFeedback,o=n.timestamp,s=n.recommendedActions,c=n.navigationButtons,d=[].concat(W()(e.messages),[createNewMessage({text:t,sender:Y.c.RESPONSE,id:a,clipRecommendations:i,userFeedback:r,timestamp:o,recommendedActions:s,navigationButtons:c})]);return B()(B()({},e),{},{messages:d,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",d)),badgeCount:e.badgeCount+1})})),H.b,(function(e,n){var t=n.link,a=n.id,i=[].concat(W()(e.messages),[createLinkSnippet(t,a)]);return B()(B()({},e),{},{messages:i,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",i))})})),H.a,(function(e,n){var t=n.component,a=n.props,i=n.showAvatar,r=n.id,o=[].concat(W()(e.messages),[createComponentMessage(t,a,i,r)]);return B()(B()({},e),{},{messages:o,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",o))})})),H.h,(function(e){return B()(B()({},e),{},{messages:[],historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",[])),badgeCount:0})})),H.m,(function(e,n){var t=n.index;e.messages[t].showAvatar=!1;var a=e.historicalMessagesMap[e.chatSessionId||""];a&&(a[t].showAvatar=!1)})),H.g,(function(e,n){var t=n.count,a=n.id,i=a?e.messages.filter((function(_,n){var i=e.messages.findIndex((function(e){return e.customId===a}));return n<i-t+1||n>i})):e.messages.slice(0,e.messages.length-t);return B()(B()({},e),{},{messages:i,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",i)),badgeCount:i.filter((function(e){return e.unread})).length})})),H.q,(function(e,n){var t=n.count;return B()(B()({},e),{},{badgeCount:t})})),H.n,(function(e){var n=e.messages.map((function(e){return B()(B()({},e),{},{unread:!1})}));return B()(B()({},e),{},{messages:n,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",n)),badgeCount:0})})),L()(L()(L()(L()(t,H.j,(function(e,n){var t=n.id,a=e.messages.map((function(e){return B()(B()({},e),{},{userFeedback:t===e.customId?Y.a.like:e.userFeedback})}));return B()(B()({},e),{},{messages:a,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",a))})})),H.k,(function(e,n){var t=n.id,a=e.messages.map((function(e){return B()(B()({},e),{},{userFeedback:t===e.customId?Y.a.dislike:e.userFeedback})}));return B()(B()({},e),{},{messages:a,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",a))})})),H.l,(function(e,n){var t=n.id,a=e.messages.map((function(e){return B()(B()({},e),{},{userFeedback:t===e.customId?Y.a.unset:e.userFeedback})}));return B()(B()({},e),{},{messages:a,historicalMessagesMap:B()(B()({},e.historicalMessagesMap),{},L()({},e.chatSessionId||"",a))})})),H.r,(function(e,n){var t=n.chatSessionId;return B()(B()({},e),{},{chatSessionId:t})}))),X={chatSessionId:void 0,chatSessionStorageKey:void 0,chatState:R.f.Active},Z=L()(L()(L()(L()(L()({},H.o,(function(e){return B()(B()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),H.e,(function(e){return B()(B()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),H.r,(function(e,n){var t=n.chatSessionId;return B()(B()({},e),{},{chatSessionId:t})})),H.s,(function(e,n){return B()(B()({},e),{},{chatSessionStorageKey:n})})),H.t,(function(e,n){return B()(B()({},e),{},{chatState:n.chatState})})),ee=F.b,ne=Object(F.a)({behavior:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,n=arguments.length>1?arguments[1]:void 0;return createReducer(U,e,n)},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,n=arguments.length>1?arguments[1]:void 0;return createReducer(J,e,n)},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0;return createReducer(z,e,n)},sessionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,n=arguments.length>1?arguments[1]:void 0;return createReducer(Z,e,n)}}),te=Object(F.c)(ne,ee()),ae=n("gtL6"),ie=n("6OIj"),re=n("xeAZ"),oe=n.n(re),se=n("lX80"),ce=n("Nbf1"),de=n("zXDh"),le=n("b+Bk"),ue=n.n(le),me=n("vDB9"),pe={get:function(e){var n=me.a.getItem(e,(function(e){return e}),"");return n&&"undefined"!==n?n:void 0},set:function(e,n){var t=n;me.a.setItem(e,t,(function(e){return e}))},clear:function(e){me.a.removeItem(e)}},fe=n("saWA");function updateChatHistory(e){var n=fe.w(e);te.dispatch(n)}function enableMsgLoader(e){te.dispatch(fe.h(e))}function toggleInputDisabled(e){te.dispatch(fe.v(e))}function dispatcher_setChatSessionId(e){te.dispatch(fe.m(e))}function setChatState(e){te.dispatch(fe.o(e))}function dispatcher_sendMessage(e){return _sendMessage.apply(this,arguments)}function _sendMessage(){return(_sendMessage=N()(x()().mark((function _callee(e){var n,t,a,i,r,o,s;return x()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=te.getState(),t=n.sessionState,a=t.chatSessionId,i=t.chatSessionStorageKey,r=t.chatState,o=new se.a,s=new ce.a({uri:"/graphql-gateway?opname=AiCoach_CreateUserMessageAndReturnResponse",cache:o,headers:{"Accept-Language":Object(de.getIetfLanguageTag)()}}),d=e.input.message,l=void 0,u=void 0,m=e.input.action,te.dispatch(fe.c(d,l,u,m)),enableMsgLoader(!0),c.abrupt("return",s.mutate({mutation:ue.a,variables:{input:B()(B()({},e.input),{},{chatSessionId:a}),clipRecommendationsEnabled:e.clipRecommendationsEnabled,recommendedActionsEnabled:e.recommendedActionsEnabled},context:{clientName:"gatewayGql"}}).then((function(e){var n=e.data,t=(null==n?void 0:n.AiCoach_CreateUserMessageAndReturnResponse)||{},o=t.messageByAiCoach,s=t.clipRecommendations,c=t.recommendedActions,d=t.navigationButtons,l=t.session||{},u=l.id,m=l.status;m&&r!==m&&setChatState(m),enableMsgLoader(!1),a||dispatcher_setChatSessionId(u);var p=null==i?void 0:i.chatSessionStorageKey;return!pe.get(p)&&u&&pe.set(p,u),null!=o&&o.message&&te.dispatch(fe.b(o.message,o.messageId,s,void 0,"",c,d)),n})));case 7:case"end":return c.stop()}var d,l,u,m}),_callee)})))).apply(this,arguments)}function useChatHistory(e){var n=e.historyLimit,t=e.recommendedActionsEnabled,a=e.clipRecommendationsEnabled,i=e.skipStore,r=void 0!==i&&i,o=Object(ie.a)(),s=l.useState(!1),c=T()(s,2),d=c[0],u=c[1],m=l.useState(null),p=T()(m,2),f=p[0],g=p[1],h=!1,v=te.getState().sessionState.chatState,b=function(){var e=N()(x()().mark((function _callee(e){var i,s,c,d,l,m,p,f,b,k,C,S,O;return x()().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return u(!0),I.prev=1,I.next=4,o.query({query:oe.a,variables:{chatSessionId:e,limit:n,recommendedActionsEnabled:t,clipRecommendationsEnabled:a},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 4:if(l=I.sent,(m=null===(i=l.data.AiCoach)||void 0===i?void 0:i.queryByChatSessionId.session.status)&&m!==v&&!r&&setChatState(m),null===(s=l.data)||void 0===s||null===(c=s.AiCoach)||void 0===c||null===(d=c.queryByChatSessionId)||void 0===d||!d.elements){I.next=14;break}return k=null===(p=l.data)||void 0===p?void 0:null===(f=p.AiCoach)||void 0===f?void 0:null===(b=f.queryByChatSessionId)||void 0===b?void 0:b.elements,C=k.map((function(e){return e.senderType===Y.c.CLIENT?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}:e.senderType===Y.c.RESPONSE?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt,clipRecommendations:e.clipRecommendations,userFeedback:e.userFeedback,recommendedActions:e.recommendedActions,navigationButtons:e.navigationButtons,structuredResponse:e.structuredResponse}:{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}})),S=C.reverse(),r||updateChatHistory(S),u(!1),I.abrupt("return",S);case 14:return I.abrupt("return",[]);case 17:return I.prev=17,I.t0=I.catch(1),h&&g(I.t0),h&&u(!1),O=I.t0,Object(ae.a)({error:O,source:"useChatHistory"}),I.abrupt("return",[]);case 24:case"end":return I.stop()}}),_callee,null,[[1,17]])})));return function(n){return e.apply(this,arguments)}}();return l.useEffect((function(){return h=!0,function(){h=!1}}),[]),{loading:d,error:f,refreshHistory:b}}var ge,he,ve,be,ke,Ce,Se,Oe,Ie,ye,we,je,xe,Ee,Ne,_e,Ae,Te,Me,Re=n("kNe7"),Fe=n("IyUU"),Pe=n.n(Fe),hooks_useCreateUserChatSession=function(e){var n=e.itemId,t=e.courseId,a=e.inAuthoringMode,i=Object(b.b)().id.toString(),r=Object(ie.a)(),o=l.useState(!1),s=T()(o,2),c=s[0],d=s[1],u=l.useState(null),m=T()(u,2),p=m[0],f=m[1];return{getNewChatSessionId:function(){var e=N()(x()().mark((function _callee(e){var o,s,c,l,u,m,p;return x()().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return o=Object(S.d)(t,n,a),s="",d(!0),g.prev=3,g.next=6,r.mutate({mutation:Pe.a,variables:{input:{title:e||o,userId:i}},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 6:null!=(l=g.sent)&&null!==(c=l.data)&&void 0!==c&&c.AiCoach_CreateChatSession&&(s=null===(u=l.data)||void 0===u?void 0:null===(m=u.AiCoach_CreateChatSession)||void 0===m?void 0:m.id),d(!1),g.next=16;break;case 11:g.prev=11,g.t0=g.catch(3),p=g.t0,f(g.t0),Object(ae.a)({error:p,source:"useCreateUserChatSession"});case 16:return g.abrupt("return",s);case 17:case"end":return g.stop()}}),_callee,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:c,error:p}},useStartNewChatSession_useStartNewChatSession=function(e){var n=e.itemId,t=e.courseId,a=e.inAuthoringMode,i=hooks_useCreateUserChatSession({itemId:n,courseId:t,inAuthoringMode:a}),r=i.getNewChatSessionId,o=i.error;return{startNewChatSession:l.useCallback(function(){var e=N()(x()().mark((function _callee(e){var n;return x()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,a=te.getState().sessionState.chatSessionStorageKey,pe.clear(null==a?void 0:a.chatSessionStorageKey),te.dispatch(fe.d()),setChatState(R.f.Active),t.next=3,r(e);case 3:return dispatcher_setChatSessionId(n=t.sent),te.dispatch(fe.g()),t.abrupt("return",n);case 7:case"end":return t.stop()}var a}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[r]),error:o}},Le=n("Yql6"),De=n("oaVt"),useCoachItemSendMessage_handleMessageResponseError=function(e){var n,t,a,i,r,o,s,c;if(enableMsgLoader(!1),t={text:Object(Y.e)()},a=t.text,i=t.id,r=t.clipRecommendations,o=t.userFeedback,s=t.timestamp,c=t.recommendedActions,te.dispatch(fe.b(a,i,r,o,s,c)),e.graphQLErrors&&(null===(n=e.graphQLErrors)||void 0===n?void 0:n.length)>0){var d=e.graphQLErrors[0];Object(ae.a)({error:d})}},useCoachItemSendMessage_endOfCoachChatRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===R.d.CoachItemSummary})))||void 0===n?void 0:n[0]},useCoachItemSendMessage_imStuckRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===R.d.CoachItemStuckContinue||e.action===R.d.CoachItemStuckEnd})))||void 0===n?void 0:n[0]},useCoachItemSendMessage_getStartedRecommendedAction=function(e){return null==e?void 0:e.find((function(e){return e.action===R.d.CoachItemLetsGetStarted}))},hooks_useCoachItemSendMessage=function(e){var n=e.authoringMode,t=e.courseraContext,a=e.endStateCallback,i=e.coachItemType,r=t.courseId,o=t.itemId,s=Object(Le.a)(),c=Object(S.a)(n),d=l.useCallback((function(){s("interact_coach",{coachInteractionType:"end_chat_session",coachAction:i===De.e.SocraticDialogue?"COACH_ITEM_END_DIALOGUE":"COACH_ITEM_END_ROLE_PLAY",coach:{mode:c},product:{type:"course",id:r||""},courseItem:{id:o||""}})}),[r,o,c,s,i]),u=l.useCallback(function(){var e=N()(x()().mark((function _callee(e){var i,r,o,s,c,l,u,m;return x()().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(i="ACTIVE"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),r="ENDED"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),o=null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.recommendedActions,s=useCoachItemSendMessage_endOfCoachChatRecommendedAction(o),c=useCoachItemSendMessage_imStuckRecommendedAction(o),l=te.getState(),u=l.sessionState,m=u.chatSessionId,!s||!i){p.next=10;break}return p.next=10,dispatcher_sendMessage(Object(S.b)({message:s.actionMessage,action:s.action,chatSessionId:m,authoringMode:n,courseraContext:t}));case 10:r&&(d(),a()),toggleInputDisabled(!!c);case 12:case"end":return p.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,t,a,d]);return{sendMessage:l.useCallback(function(){var e=N()(x()().mark((function _callee2(e,a){var i,r,o,s;return x()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,i=te.getState(),r=i.sessionState,o=r.chatSessionId,c.next=5,dispatcher_sendMessage(Object(S.b)({message:e,action:a,chatSessionId:o,authoringMode:n,courseraContext:t}));case 5:return s=c.sent,c.next=8,u(s);case 8:return c.abrupt("return",s);case 11:c.prev=11,c.t0=c.catch(0),useCoachItemSendMessage_handleMessageResponseError(c.t0);case 14:case"end":return c.stop()}}),_callee2,null,[[0,11]])})));return function(n,t){return e.apply(this,arguments)}}(),[n,t,u])}},Be=n("P1ex"),He=n.n(Be),hooks_useUserChatSessions=function(){var e=Object(b.b)().id.toString(),n=Object(ie.a)(),t=l.useState(!1),a=T()(t,2),i=a[0],r=a[1],o=l.useState(null),s=T()(o,2),c=s[0],d=s[1];return{getUserSessions:function(){var t=N()(x()().mark((function _callee(){var t,a,i,o,s,c,l,u,m;return x()().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=[],r(!0),p.prev=2,p.next=5,n.query({query:He.a,variables:{userId:e,limit:100},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 5:s=p.sent,null!==(a=s.data)&&void 0!==a&&null!==(i=a.AiCoach)&&void 0!==i&&null!==(o=i.queryChatSessionsByUserId)&&void 0!==o&&o.elements&&(t=null===(c=s.data)||void 0===c?void 0:null===(l=c.AiCoach)||void 0===l?void 0:null===(u=l.queryChatSessionsByUserId)||void 0===u?void 0:u.elements),r(!1),p.next=15;break;case 10:p.prev=10,p.t0=p.catch(2),m=p.t0,d(p.t0),Object(ae.a)({error:m,source:"useUserChatSessions"});case 15:return p.abrupt("return",t);case 16:case"end":return p.stop()}}),_callee,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),loading:i,error:c}},contexts_useDialogueCoachItemChat=function(e){var n=e.courseId,t=e.itemId,a=e.authoringMode,i=e.courseraContext,r=l.useState(void 0),o=T()(r,2),s=o[0],c=o[1],d=l.useState(null),u=T()(d,2),m=u[0],p=u[1],f=l.useState(!1),g=T()(f,2),h=g[0],v=g[1],b=void 0!==a,k=hooks_useUserChatSessions(),C=k.getUserSessions,O=k.error,I=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1})||{},y=I.refreshHistory,w=I.error,j=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:b}),E=j.startNewChatSession,A=j.error,M=null;w||A||O?M={error:w||A||O,type:"API_FAIL"}:m&&(M={error:m,type:"NO_MESSAGES"});var F=h&&!M,P=l.useCallback(function(){var e=N()(x()().mark((function _callee(e,n){var t,r,o;return x()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=te.getState(),r=t.sessionState,o=r.chatSessionId,s.prev=2,s.next=5,dispatcher_sendMessage(Object(S.b)({message:e,action:n,chatSessionId:o,authoringMode:a,courseraContext:i}));case 5:return s.abrupt("return",s.sent);case 8:return s.prev=8,s.t0=s.catch(2),useCoachItemSendMessage_handleMessageResponseError(s.t0),s.abrupt("return",null);case 12:case"end":return s.stop()}}),_callee,null,[[2,8]])})));return function(n,t){return e.apply(this,arguments)}}(),[a,i]),L=l.useCallback(N()(x()().mark((function _callee2(){var e;return x()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!te.getState().behavior.messageLoader){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,E();case 5:return e=n.sent,c(e),n.next=9,P(Re.a,R.d.WelcomeMessage);case 9:case"end":return n.stop()}}),_callee2)}))),[P,E]),D=l.useCallback(N()(x()().mark((function _callee3(){var e,a,i,r,o,s,c,d;return x()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,C();case 2:if(i=l.sent,!O){l.next=5;break}return l.abrupt("return");case 5:if(r=null==i?void 0:null===(e=i.filter((function(e){return e.title===Object(S.d)(n,t,b)})))||void 0===e?void 0:e[0],o=null==r?void 0:r.id){l.next=11;break}return l.next=10,L();case 10:return l.abrupt("return");case 11:return dispatcher_setChatSessionId(o),l.next=14,null==y?void 0:y(o);case 14:s=te.getState(),null!=(c=s.messages)&&null!==(a=c.messages)&&void 0!==a&&a.length||(d=new Error("No messages found in the chat history for the session ".concat(o)),Object(ae.a)({error:d,source:"loadingChatHistory"}),p(d),v(!1));case 16:case"end":return l.stop()}}),_callee3)}))),[O,n,y,C,b,t,v,L]),B=l.useCallback(N()(x()().mark((function _callee4(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,D();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ae.a)({error:e.t0,source:"loadChatInternal"});case 9:v(!1);case 10:case"end":return e.stop()}}),_callee4,null,[[1,6]])}))),[D,v]);return{dialogueSessionId:s,error:M,startNewDialogueChat:L,loadChat:B,isLoading:F}},Ve=n("IWWe"),utils_getTunnelVisionState=function(e){if(e){var n=Ve.a.getItem("coachItemTunnelVisionState",JSON.parse,{});return null==n?void 0:n[e]}},utils_setTunnelVisionState=function(e,n,t){if(e&&n&&void 0!==t){var a=Ve.a.getItem("coachItemTunnelVisionState",JSON.parse,{}),i=B()(B()({},a||{}),{},L()({},e,B()(B()({},(null==a?void 0:a[e])||{}),{},L()(L()({},n,t),"timestamp",(new Date).toISOString()))));Ve.a.setItem("coachItemTunnelVisionState",i,JSON.stringify)}},utils_clearTunnelVisionState=function(e){if(e){var n=Ve.a.getItem("coachItemTunnelVisionState",JSON.parse,{});null==n||delete n[e];var t=new Date;t.setDate(t.getDate()-7),Object.keys(n||{}).forEach((function(e){var a=null==n?void 0:n[e];null!=a&&a.timestamp&&(new Date(a.timestamp)<t&&(null==n||delete n[e]))})),Ve.a.setItem("coachItemTunnelVisionState",n,JSON.stringify)}},contexts_useRolePlayCoachItemChat=function(e){var n=e.courseId,t=e.itemId,a=e.authoringMode,i=e.courseraContext,r=l.useState(!1),o=T()(r,2),s=o[0],c=o[1],d=l.useState(void 0),u=T()(d,2),m=u[0],p=u[1],f=l.useState(),g=T()(f,2),h=g[0],v=g[1],b=l.useState(),k=T()(b,2),C=k[0],O=k[1],I=l.useState(null),y=T()(I,2),w=y[0],j=y[1],E=l.useState(null),A=T()(E,2),M=A[0],F=A[1],P=l.useState(null),L=T()(P,2),D=L[0],B=L[1],H=l.useState(!1),V=T()(H,2),U=V[0],q=V[1],z=void 0!==a,G=Object(S.i)(n,t,z),W=hooks_useUserChatSessions(),Y=W.getUserSessions,K=W.error,Q=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1})||{},J=Q.refreshHistory,X=Q.error,Z=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:z}).startNewChatSession,ee=null;(X||K)&&(ee={error:X||K,type:"API_FAIL"});var ne=U&&!ee,ie=l.useCallback(function(){var e=N()(x()().mark((function _callee(e,n){var t,r,o;return x()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=te.getState(),r=t.sessionState,o=r.chatSessionId,s.abrupt("return",dispatcher_sendMessage(Object(S.b)({message:e,action:n,chatSessionId:o,authoringMode:a,courseraContext:i})));case 3:case"end":return s.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}(),[a,i]),re=l.useCallback(N()(x()().mark((function _callee2(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(Re.j,R.d.CoachItemGenerateScenario);case 2:return q(!1),c(!0),e.next=6,ie(Re.i,R.d.CoachItemGenerateJson);case 6:c(!1);case 7:case"end":return e.stop()}}),_callee2)}))),[ie,q]),oe=l.useCallback((function(){utils_clearTunnelVisionState(h),p(void 0),v(void 0),O(void 0),dispatcher_setChatSessionId(void 0),j(null),F(null),B(null)}),[h]),se=l.useCallback(N()(x()().mark((function _callee3(){var e;return x()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!U&&!s){a.next=3;break}return a.abrupt("return");case 3:return q(!0),oe(),a.next=7,Z(Object(S.i)(n,t,z));case 7:if(e=a.sent){a.next=10;break}throw new Error("Error creating role play intro session");case 10:return p(e),a.next=13,re();case 13:q(!1),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),Object(ae.a)({error:a.t0,source:"startNewRolePlayChat"}),j(a.t0),q(!1);case 21:case"end":return a.stop()}}),_callee3,null,[[0,16]])}))),[U,s,oe,q,Z,n,t,z,re]),ce=l.useCallback(N()(x()().mark((function _callee4(){var e,a;return x()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,m){i.next=3;break}throw new Error("No intro session found for the role play");case 3:return e=Object(S.j)(n,t,m,z),i.next=6,Z(e);case 6:if(a=i.sent){i.next=9;break}throw new Error("Error creating role play simulation session");case 9:return v(a),i.next=12,ie(Re.a,R.d.WelcomeMessage);case 12:return i.abrupt("return",a);case 15:return i.prev=15,i.t0=i.catch(0),Object(ae.a)({error:i.t0,source:"startRolePlaySimulation"}),F(i.t0),i.abrupt("return","");case 20:case"end":return i.stop()}}),_callee4,null,[[0,15]])}))),[m,n,t,z,Z,ie]),de=l.useCallback(N()(x()().mark((function _callee5(){var e;return x()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,h){a.next=3;break}throw new Error("Error creating debrief session. Role play simulation session id required.");case 3:return a.next=5,Z(Object(S.g)(n,t,h,z));case 5:if(e=a.sent){a.next=8;break}throw new Error("Error creating role play debrief session");case 8:return O(e),a.next=11,ie(Re.g,R.d.CoachItemGenerateFeedback);case 11:a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),Object(ae.a)({error:a.t0,source:"createRolePlayDebrief"}),B(a.t0);case 17:case"end":return a.stop()}}),_callee5,null,[[0,13]])}))),[z,n,t,h,ie,Z]),le=l.useCallback(N()(x()().mark((function _callee6(){var e,a,i,r,o,s,c,d;return x()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Y();case 2:if(e=l.sent,!K){l.next=5;break}return l.abrupt("return");case 5:if(a=e.find((function(e){return e.title===G})),i=null==a?void 0:a.id){l.next=12;break}return l.next=10,se();case 10:l.next=30;break;case 12:return p(i),dispatcher_setChatSessionId(i),l.next=16,null==J?void 0:J(i);case 16:if(o=Object(S.j)(n,t,i,z),!(s=null===(r=e.filter((function(e){return e.title===o})))||void 0===r?void 0:r[0])){l.next=30;break}return v(s.id),dispatcher_setChatSessionId(s.id),l.next=23,null==J?void 0:J(s.id);case 23:if(c=Object(S.g)(n,t,s.id,z),!(d=e.find((function(e){return e.title===c})))){l.next=30;break}return O(d.id),dispatcher_setChatSessionId(d.id),l.next=30,null==J?void 0:J(d.id);case 30:case"end":return l.stop()}}),_callee6)}))),[Y,K,G,se,J,n,t,z]),ue=l.useCallback(N()(x()().mark((function _callee7(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,le();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ae.a)({error:e.t0,source:"loadChatInternal"});case 9:q(!1);case 10:case"end":return e.stop()}}),_callee7,null,[[1,6]])}))),[le,q]);return{isRolePlayJSONLoading:s,rolePlayIntroSessionId:m,rolePlaySimulationSessionId:h,rolePlayDebriefSessionId:C,startNewRolePlayChat:se,startRolePlaySimulation:ce,createRolePlayDebrief:de,loadChat:ue,isLoading:ne,rolePlayIntroCreationError:w,rolePlaySimulationCreationError:M,rolePlayDebriefCreationError:D,chatHistoryLoadingError:X,chatLoadingError:ee,setRolePlayDebriefCreationError:B}},Ue=["children"],qe=l.createContext(void 0),useCoachItemChatContext_CoachItemChatContextProvider=function(e){var n,t,a,i,r,o,s,c,d,u,m,p,f,g,h,v,b,k,C,O,I,y,j,E,A,F,P,L,D,B,H,V,U,q,z,G,W,Y,K,Q,J,X,Z,ee=e.children,ne=w()(e,Ue),ie=(t=(n=ne).courseId,a=n.courseBranchId,i=n.coachItemType,r=n.rolePlayAiPersonaTitle,o=n.itemId,s=n.authoringMode,c=n.authoringCourseBranchId,d=n.itemName,u=n.nextItemLink,m=n.onCloseChat,p=n.authorCoachItemSyncNotification,f=l.useState(!1),g=T()(f,2),h=g[0],v=g[1],b=Object(S.f)({authoringCourseBranchId:c,authoringMode:s,courseBranchId:a,courseId:t,itemId:o}),k=l.useMemo((function(){return{coach:{mode:R.g.CoachItem},product:{type:"course",id:t},courseItem:{id:o}}}),[t,o]),C=contexts_useDialogueCoachItemChat({courseId:t,itemId:o,authoringMode:s,courseraContext:b}),O=C.dialogueSessionId,I=C.error,y=C.startNewDialogueChat,j=C.loadChat,E=C.isLoading,A=contexts_useRolePlayCoachItemChat({courseId:t,itemId:o,authoringMode:s,courseraContext:b}),F=A.isRolePlayJSONLoading,P=A.rolePlayIntroSessionId,L=A.rolePlaySimulationSessionId,D=A.rolePlayDebriefSessionId,B=A.startNewRolePlayChat,H=A.startRolePlaySimulation,V=A.createRolePlayDebrief,U=A.loadChat,q=A.isLoading,z=A.rolePlayIntroCreationError,G=A.rolePlaySimulationCreationError,W=A.rolePlayDebriefCreationError,Y=A.chatLoadingError,K=A.setRolePlayDebriefCreationError,Q=hooks_useCoachItemSendMessage({authoringMode:s,courseraContext:b,endStateCallback:V,coachItemType:i}).sendMessage,J=l.useCallback(N()(x()().mark((function _callee(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i===De.e.RolePlay?B():y();case 1:case"end":return e.stop()}}),_callee)}))),[i,y,B]),X=l.useCallback(N()(x()().mark((function _callee2(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==De.e.SocraticDialogue){e.next=5;break}return e.next=3,j();case 3:e.next=11;break;case 5:if(i!==De.e.RolePlay){e.next=10;break}return e.next=8,U();case 8:e.next=11;break;case 10:Object(ae.a)({error:new Error("Unknown coach item type: ".concat(i)),source:"loadChat"});case 11:case"end":return e.stop()}}),_callee2)}))),[i,j,U]),Z=l.useCallback((function(e){v(e),e||null==m||m()}),[m]),l.useMemo((function(){return{courseId:t,courseBranchId:a,itemId:o,coachItemType:i,rolePlayAiPersonaTitle:r,authoringMode:s,authoringCourseBranchId:c,trackingData:k,startNewChat:J,startRolePlaySimulation:H,loadChat:X,chatIsOpen:h,setChatIsOpen:Z,itemName:d,sendMessage:Q,isDialogueLoading:E,dialogueError:I,isRolePlayJSONLoading:F,nextItemLink:u,dialogueSessionId:O,rolePlayIntroSessionId:P,rolePlaySimulationSessionId:L,rolePlayDebriefSessionId:D,authorCoachItemSyncNotification:p,rolePlayIntroCreationError:z,rolePlaySimulationCreationError:G,rolePlayDebriefCreationError:W,setRolePlayDebriefCreationError:K,rolePlayChatLoadingError:Y,isRolePlayLoading:q,createRolePlayDebrief:V}}),[t,a,o,i,r,s,c,k,J,H,X,h,Z,d,Q,E,I,F,u,O,P,L,D,p,z,G,W,K,Y,q,V]));return l.createElement(M.a,{store:te},l.createElement(qe.Provider,{value:ie},ee))},useCoachItemChatContext_useCoachItemChatContext=function(){var e=l.useContext(qe);if(!e)throw new Error("useCoachItemChatContext must be used within a LearnerCoachItemContextProvider");return e},ze=n("b59L"),Ge=n("/FeB"),We=n.n(Ge),hooks_useCoachRespondToUserMessage=function(e){var n=e.itemId,t=e.courseId,a=e.courseBranchId,i=e.authoringCourseBranchId,r=e.authoringMode,o=Object(ie.a)(),s=l.useState(!1),c=T()(s,2),d=c[0],u=c[1],m=l.useState(null),p=T()(m,2),f=p[0],g=p[1],h=Object(S.f)({authoringCourseBranchId:i,authoringMode:r,courseBranchId:a,courseId:t,itemId:n});return{sendResponse:function(){var e=N()(x()().mark((function _callee(e){var n,t,a,i,r,s,c,d;return x()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.chatSessionId,t=e.message,a=e.config,u(!0),l.prev=2,l.next=5,o.mutate({mutation:We.a,variables:{input:{chatSessionId:n,message:t,courseraContext:h,config:a}},context:{clientName:"gatewayGql"}});case 5:if(null==(r=l.sent)||null===(i=r.data)||void 0===i||!i.AiCoach_RespondToUserMessage){l.next=9;break}return u(!1),l.abrupt("return",null===(s=r.data)||void 0===s?void 0:null===(c=s.AiCoach_RespondToUserMessage)||void 0===c?void 0:c.messageByAiCoach);case 9:l.next=16;break;case 11:l.prev=11,l.t0=l.catch(2),d=l.t0,g(l.t0),Object(ae.a)({error:d,source:"useCoachRespondToUserMessage"});case 16:return l.abrupt("return",void 0);case 17:case"end":return l.stop()}}),_callee,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:d,error:f}},Ye=["children"],Ke=l.createContext(void 0),useRolePlayHintContext_getRequestHintAction=function(e){return function(e){var n,t,a=2===e.length,i="text"===(null===(n=e[0])||void 0===n?void 0:n.type)&&e[0].text===Re.a,r=(null===(t=e[1])||void 0===t?void 0:t.sender)===Y.c.RESPONSE;return a&&i&&r}(e)?Re.f:e.length>2?Re.l:""},useRolePlayHintContext_RolePlayHintContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,a=e.itemId,i=l.useState(!1),r=T()(i,2),o=r[0],s=r[1],c=l.useState(!1),d=T()(c,2),u=d[0],m=d[1],p=l.useState(void 0),f=T()(p,2),g=f[0],h=f[1],v=l.useState(void 0),b=T()(v,2),k=b[0],C=b[1],O=l.useState({}),I=T()(O,2),y=I[0],w=I[1],j=useCoachItemChatContext_useCoachItemChatContext(),E=j.rolePlaySimulationSessionId,A=j.authoringMode,R=l.useCallback((function(e){w(e),E&&utils_setTunnelVisionState(E,"expandedHintMessages",e)}),[E]),F=hooks_useUserChatSessions().getUserSessions,P=void 0!==A,L=hooks_useCreateUserChatSession({itemId:a,courseId:n,inAuthoringMode:P}),D=L.getNewChatSessionId,B=L.error,H=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0})||{},V=H.refreshHistory,U=H.error,q=hooks_useCoachRespondToUserMessage({itemId:a,courseId:n,authoringMode:A,courseBranchId:t}),z=q.sendResponse,G=q.error,Y=Object(M.c)((function(e){return{messages:E&&e.messages.historicalMessagesMap[E]||e.messages.messages}})).messages,K=null;B||G?K={error:B||G,type:"API_FAIL"}:U&&(K={error:U,type:"NO_MESSAGES"});var Q,J=o&&!K,X=u&&!K;E&&(Q=Object(S.h)(n,a,E,P));var Z=l.useCallback(N()(x()().mark((function _callee(){var e,n,t,a,i,r;return x()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,s(!0),e=W()(k||[]),n=g){o.next=9;break}return o.next=7,D(Q);case 7:n=o.sent,h(n);case 9:if(t=useRolePlayHintContext_getRequestHintAction(Y)){o.next=13;break}throw s(!1),new Error("Something went wrong on determining the right hint action");case 13:return o.next=15,z({chatSessionId:n,message:Re.h,config:{coachActionId:t,coachModeId:Re.o}});case 15:if(!(a=o.sent)){o.next=21;break}return e=[].concat(W()(e),[{messageId:a.messageId,referencedMessageId:(null===(i=a.structuredResponse)||void 0===i?void 0:i.referencedMessageId)||"",message:(null===(r=a.structuredResponse)||void 0===r?void 0:r.hint)||""}]),C(e),s(!1),o.abrupt("return",e);case 21:s(!1),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),Object(ze.a)({error:o.t0,source:"requestNewHint"});case 27:return o.abrupt("return",k||[]);case 28:case"end":return o.stop()}}),_callee,null,[[0,24]])}))),[Y,k,g,z,D,Q]),ee=l.useCallback(N()(x()().mark((function _callee2(){var e,n,t,a,i;return x()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,F();case 2:if((n=r.sent)&&Q){r.next=5;break}return r.abrupt("return",[]);case 5:if(t=n.find((function(e){return e.title===Q})),a=null==t?void 0:t.id){r.next=9;break}return r.abrupt("return",[]);case 9:return h(a),m(!0),r.next=13,null==V?void 0:V(a);case 13:if(r.t1=e=r.sent,r.t0=null===r.t1,r.t0){r.next=17;break}r.t0=void 0===e;case 17:if(!r.t0){r.next=21;break}r.t2=void 0,r.next=22;break;case 21:r.t2=e.filter((function(e){return"SYSTEM"===e.sender})).map((function(e){return{messageId:e.id,referencedMessageId:e.structuredResponse.referencedMessageId,message:e.structuredResponse.hint,userFeedback:e.userFeedback}}));case 22:return i=r.t2,C(i),m(!1),r.abrupt("return",i);case 26:case"end":return r.stop()}}),_callee2)}))),[V,F,Q]),ne=l.useCallback((function(){C(void 0),h(void 0)}),[C,h]);return l.useMemo((function(){return{courseId:n,courseBranchId:t,itemId:a,requestNewHint:Z,loadHints:ee,isLoadingNewHint:J,isLoadingExistingHints:X,error:K,hints:k,expandedHintMessages:y,setExpandedHintMessages:R,resetHintsChatSession:ne}}),[n,t,a,Z,ee,J,X,K,k,y,R,ne])}(w()(e,Ye));return l.createElement(Ke.Provider,{value:t},n)},useRolePlayHintContext_useRolePlayHintContext=function(){var e=l.useContext(Ke);if(!e)throw new Error("useRolePlayHintContext must be used within a RolePlayHintContext");return e},Qe=["children"],Je=l.createContext(void 0),useRolePlayTasksContext_getTaskListWithProgress=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n.reduce((function(e,n){return B()(B()({},e),{},L()({},n.id,n.completed))}),{});return(null==e?void 0:e.map((function(e){var n;return B()(B()({},e),{},{completed:null!==(n=a[e.id])&&void 0!==n?n:t})})))||[]},useRolePlayTasksContext_getTaskDetailsFromChatHistory=function(e){var n=e.filter((function(e){return"SYSTEM"===e.sender})).reduce((function(e,n){var t,a;return null!==(t=n.structuredResponse)&&void 0!==t&&t.taskList&&(e.taskList=n.structuredResponse.taskList),null!==(a=n.structuredResponse)&&void 0!==a&&a.taskProgress&&(e.taskProgress=n.structuredResponse.taskProgress),e}),{taskList:[],taskProgress:[]}),t=e.some((function(e){var n;return"SYSTEM"===e.sender&&(null===(n=e.structuredResponse)||void 0===n?void 0:n.taskProgress)}));return B()(B()({},n),{},{isTaskProgressRecorded:t})},useRolePlayTasksContext_RolePlayTasksContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,a=e.itemId,i=e.authoringCourseBranchId,r=l.useState(!1),o=T()(r,2),s=o[0],c=o[1],d=l.useState(void 0),u=T()(d,2),m=u[0],p=u[1],f=l.useState(!1),g=T()(f,2),h=g[0],v=g[1],b=l.useState(""),k=T()(b,2),C=k[0],O=k[1],I=useCoachItemChatContext_useCoachItemChatContext().authoringMode,y=hooks_useUserChatSessions().getUserSessions,w=void 0!==I,j=hooks_useCoachRespondToUserMessage({itemId:a,courseId:n,authoringCourseBranchId:i,authoringMode:I,courseBranchId:t}),E=j.sendResponse,A=j.loading,M=j.error,R=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0})||{},F=R.refreshHistory,P=R.error,L=hooks_useCreateUserChatSession({itemId:a,courseId:n,inAuthoringMode:w}),D=L.getNewChatSessionId,B=L.error,H=null;(B||M||P)&&(H={error:B||M||P,type:"API_FAIL"});var V=s&&!H,U=l.useCallback(function(){var e=N()(x()().mark((function _callee(e){var t,i;return x()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(S.k)(n,a,e,w),r.next=3,D(t);case 3:return i=r.sent,O(i),r.abrupt("return",i);case 6:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,a,D,w]),q=l.useCallback(function(){var e=N()(x()().mark((function _callee2(e){var n,t,a,i,r;return x()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(!0),o.next=3,U(e);case 3:return n=o.sent,O(n),o.next=7,E({chatSessionId:n,message:Re.k,config:{coachActionId:Re.s,coachModeId:Re.o}});case 7:if(!(t=o.sent)){o.next=14;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskList)||[],r=useRolePlayTasksContext_getTaskListWithProgress(i,[]),p(r),c(!1),o.abrupt("return",r);case 14:return c(!1),o.abrupt("return",[]);case 16:case"end":return o.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[E,U]),z=l.useCallback(function(){var e=N()(x()().mark((function _callee3(e,n){var t,a,i,r;return x()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e){o.next=3;break}throw new Error("rolePlayTaskChatSessionId is required to request task tracking");case 3:if(!n.every((function(e){return e.completed}))){o.next=7;break}return p(n),o.abrupt("return",n);case 7:return o.next=9,E({chatSessionId:e,message:Re.k,config:{coachActionId:Re.t,coachModeId:Re.o}});case 9:if(!(t=o.sent)){o.next=15;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskProgress)||[],r=useRolePlayTasksContext_getTaskListWithProgress(n,i,!0),p(r),o.abrupt("return",r);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),Object(ze.a)({error:o.t0,source:"requestTaskTracking"});case 20:return o.abrupt("return",[]);case 21:case"end":return o.stop()}}),_callee3,null,[[0,17]])})));return function(n,t){return e.apply(this,arguments)}}(),[E]),G=l.useCallback((function(){c(!0),v(!0),p(void 0)}),[c,v,p]),W=l.useCallback((function(){O("")}),[O]),Y=l.useCallback(function(){var e=N()(x()().mark((function _callee4(e){var t,i,r,o,s,d,l,u,m,f;return x()().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(!h){g.next=2;break}return g.abrupt("return",[]);case 2:if(c(!0),t=Object(S.k)(n,a,e,w),i=C){g.next=11;break}return g.next=8,y();case 8:r=g.sent,o=null==r?void 0:r.find((function(e){return e.title===t})),i=(null==o?void 0:o.id)||"";case 11:return O(i),g.next=14,null==F?void 0:F(i);case 14:if(g.t0=g.sent,g.t0){g.next=17;break}g.t0=[];case 17:return s=g.t0,d=useRolePlayTasksContext_getTaskDetailsFromChatHistory(s),l=d.taskList,u=d.taskProgress,m=d.isTaskProgressRecorded,f=useRolePlayTasksContext_getTaskListWithProgress(l,u,m),p(f),c(!1),g.abrupt("return",f);case 23:case"end":return g.stop()}}),_callee4)})));return function(n){return e.apply(this,arguments)}}(),[h,F,n,a,w,y,C]);return l.useMemo((function(){return{requestTaskList:q,requestTaskTracking:z,loadTaskList:Y,setShouldSkipChatHistory:v,handleInitialTaskLoad:G,isTaskListLoading:V,isTaskResponseLoading:A,error:H,tasks:m,taskChatSessionId:C,resetTaskChatSession:W}}),[m,C,q,z,Y,v,G,W,V,A,H])}(w()(e,Qe));return l.createElement(Je.Provider,{value:t},n)},useRolePlayTasksContext_useRolePlayTasksContext=function(){var e=l.useContext(Je);if(!e)throw new Error("useRolePlayTasksContext must be used within a RolePlayTasksContext");return e},$e=l.createContext(void 0),useTunnelVisionToolbarContext_useTunnelVisionToolbarContext=function(){var e=l.useContext($e);if(!e)throw new Error("useTunnelVisionToolbarContext must be used within a TunnelVisionToolbarProvider");return e},useTunnelVisionToolbarContext_TunnelVisionToolbarProvider=function(e){var n=e.children,t=l.useState(!1),a=T()(t,2),i=a[0],r=a[1],o=l.useState("tasks"),s=T()(o,2),c=s[0],d=s[1],setSelectedToolWithSessionId=function(e,n){d(e),utils_setTunnelVisionState(n,"selectedTool",e)},setExpandedWithSessionId=function(e,n){r(e),utils_setTunnelVisionState(n,"toolbarExpanded",e)},u=l.useMemo((function(){return{expanded:i,setExpanded:setExpandedWithSessionId,selectedTool:c,setSelectedTool:setSelectedToolWithSessionId}}),[i,c]);return l.createElement($e.Provider,{value:u},n)},Xe=n("FdHa"),Ze=n("6/Gu"),en=n("l1rq"),nn=n("ZJgU"),tn=n("mHyk"),an=n("HulD"),rn=n("TR2N"),on=n.n(rn),components_NonStandardPromptWarning=function(e){var n=e.promptVersion,t=e.coachItemType;return n!==Object(S.c)(t)&&Object(b.d)()?l.createElement(Ze.a,{item:!0,css:{marginBottom:"var(--cds-spacing-300)"}},l.createElement(an.a,{severity:"information",title:on()("Non-standard prompt in use")},on()("It looks like you're using prompt version #{chosenPromptVersion}, when the standard prompt version is currently #{standardPromptVersion}.",{chosenPromptVersion:n,standardPromptVersion:Re.e}))):null},sn=n("vXr1"),cn=n("A0dR"),dn=n("gKW9"),ln=n.n(dn),un={completed:Object(d.c)(ge||(ge=c()(["\n    "," {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),Xe.a.down("xs")),completedStateContainer:Object(d.c)(he||(he=c()(["\n    display: flex;\n    padding: var(--cds-spacing-150);\n  "]))),completedIcon:Object(d.c)(ve||(ve=c()(["\n    margin-right: var(--cds-spacing-50);\n  "]))),completedText:Object(d.c)(be||(be=c()(["\n    margin-right: var(--cds-spacing-300);\n    margin-left: var(--cds-spacing-50);\n  "]))),nextItem:Object(d.c)(ke||(ke=c()(["\n    "," {\n      margin-top: var(--cds-spacing-400);\n    }\n  "])),Xe.a.down("xs"))},chat_view_MarkAsCompleteButton=function(e){var n=e.isComplete,t=e.variant,a=void 0===t?"primary":t,i=e.className,r=e.disabled,o=e.nextItem,s=e.markComplete,c=Object(sn.d)();return Object(d.d)("div",{"data-testid":"mark-as-complete-container",className:i},n?Object(d.d)(Ze.a,{container:!0,direction:"row","data-testid":"completed",css:un.completed},Object(d.d)(Ze.a,{item:!0,container:!0,alignItems:"center","data-testid":"completed-state",css:un.completedStateContainer},Object(d.d)(cn.a,{size:"medium",color:"success","aria-hidden":!0,css:un.completedIcon}),Object(d.d)("div",{role:"alert","aria-live":"polite"},Object(d.d)(en.a,{variant:"subtitleMedium",color:"success",css:un.completedText,component:"div"},Object(d.d)(k.a,{component:"span",className:"rc-A11yScreenReaderOnly"},ln()("Item is completed.")),Object(d.d)("span",{"aria-hidden":!0},ln()("Completed"))))),!!o&&Object(d.d)(Ze.a,{item:!0},Object(d.d)(tn.a,{"data-testid":"next-item",css:un.nextItem,variant:"primary",type:"submit",onClick:function(){o&&c(o.getLink())},trackingData:{button:{name:"coach_item_navigate_to_next_item"}}},ln()("Go to next item")))):Object(d.d)(tn.a,{"data-testid":"mark-complete",variant:a,type:"submit",disabled:r,onClick:s,trackingData:{button:{name:"coach_item_mark_complete"}}},ln()("Mark as complete")))},mn={instructions:Object(d.c)(Ce||(Ce=c()(["\n    margin-bottom: var(--cds-spacing-600);\n  "]))),instructionsText:Object(d.c)(Se||(Se=c()(["\n    margin-bottom: var(--cds-spacing-150);\n  "]))),startButton:Object(d.c)(Oe||(Oe=c()(["\n    margin-right: var(--cds-spacing-200);\n\n    "," {\n      margin-bottom: var(--cds-spacing-200);\n    }\n  "])),Xe.a.down("xs"))},components_CoverPage=function(e){var n=e.instructions,t=e.markComplete,a=e.markStarted,i=e.isCompleted,r=e.isStarted,o=e.promptVersion,s=(e.children,useCoachItemChatContext_useCoachItemChatContext()),c=s.loadChat,u=s.setChatIsOpen,m=s.courseId,p=s.itemId,f=s.coachItemType,g=Object(tn.e)();return Object(d.d)(Ze.a,null,Object(d.d)(components_NonStandardPromptWarning,{promptVersion:o,coachItemType:f}),n&&Object(d.d)(Ze.a,{css:mn.instructions},n.split("\n\n").map((function(e,n){return Object(d.d)(en.a,{component:"p",key:"paragraph-".concat(n),css:mn.instructionsText},e.split("\n").map((function(n,t){var a=t!==e.split("\n").length-1;return Object(d.d)(l.Fragment,{key:n},n,a&&(Ie||(Ie=Object(d.d)("br",null))))})))}))),Object(d.d)(Ze.a,{container:!0},Object(d.d)(nn.a,{variant:"primary",onClick:function(){g("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_COVER_PAGE",coach:{mode:R.g.CoachItem},product:{type:"course",id:m},courseItem:{id:p}}),r||a(),c(),u(!0)},css:mn.startButton},f===De.e.SocraticDialogue?on()("Open Dialogue"):on()("Open Role-play")),Object(d.d)(chat_view_MarkAsCompleteButton,{isComplete:i,variant:"secondary",disabled:!r,markComplete:t})))},pn=n("mIiF"),fn=n("gksZ"),gn=n("sBcU"),hn=n("SUk0"),vn=n("lPk7"),bn=n("TSYQ"),kn=n.n(bn),Cn=(Object(d.c)(ye||(ye=c()(["\n    height: 100%;\n  "]))),Object(d.c)(we||(we=c()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-primary-invert);\n    }\n\n    .coach-message-client {\n      background-color: none;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Xe.a.down("xs")),Object(d.c)(je||(je=c()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-grey-100);\n  "]))),Object(d.c)(xe||(xe=c()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    position: relative;\n  "]))),Object(d.c)(Ee||(Ee=c()(["\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),Object(d.c)(Ne||(Ne=c()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: 770px;\n    margin: 0 auto;\n    border-top: 1px solid var(--cds-color-grey-100);\n  "]))),Object(d.c)(_e||(_e=c()(["\n    flex-grow: 0;\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),n("DxU6")),Sn=n.n(Cn);Object(d.c)(Ae||(Ae=c()(["\n      .hide-smart-scroll-container,\n      .show-smart-scroll-container,\n      .SmartScrollWrapper {\n        z-index: -1 !important;\n      }\n    "]))),Object(d.c)(Te||(Te=c()(["\n    "," {\n      .ai-course-coach-widget {\n        overflow: hidden;\n      }\n\n      .show-smart-scroll-container {\n        z-index: -1 !important;\n      }\n    }\n  "])),Xe.a.down("xs")),Object(d.c)(Me||(Me=c()(["\n    height: 100%;\n    border-radius: var(--cds-border-radius-200);\n    box-shadow: 0 4px 40px -8px rgb(0 0 0 / 40%), 0 4px 8px -8px rgb(0 0 0 / 40%);\n    overflow: hidden;\n  "])));var On=n("L1vm"),In=(n("cE3W"),n("zyGl"),n("Ji5S")),yn=n("5x5m");var wn,jn,xn=n("Z3v1"),En=n("cVIm"),Nn=n("fAYU");var _n,components_Footer=function(e){var n=e.coachPersona;return Object(d.d)(en.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Object(d.c)(wn||(wn=c()(["\n        padding: var(--cds-spacing-200);\n      "])))},Object(d.d)(xn.FormattedMessage,{message:Sn()("{coachPersonaName} is powered by AI. Please be aware that the AI may make mistakes, so review responses carefully and do not share any sensitive information. Your data will be handled in accordance with {privacyNotice}."),privacyNotice:Object(d.d)(Nn.a,{href:"".concat(En.a.url.base,"about/privacy?trk_ref=coach"),target:"_blank",rel:"noreferrer",css:Object(d.c)(jn||(jn=c()(["\n              color: inherit !important;\n            "])))},Sn()("Coursera's Privacy Notice")),coachPersonaName:(null==n?void 0:n.name)||"Coach"}))},An=n("0F5w");function LoadingView(e){var n=e.labelMessage||Sn()("Recalling our chat...");return Object(d.d)("div",{css:Object(d.c)(_n||(_n=c()(["\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        right: 50%;\n      "])))},Object(d.d)(An.a,{label:n}))}var Tn,Mn,Rn,Fn=n("dhC9"),Pn=7,Ln=7999,Dn={textBox:function(e){return Object(d.c)(Tn||(Tn=c()(["\n    /* CDS overrides */\n    --cds-color-neutral-background-primary-weak: var(--cds-color-emphasis-neutral-background-xweak);\n    --cds-color-interactive-stroke-primary-focus: var(--cds-color-emphasis-primary-background-xxstrong);\n    --cds-color-interactive-stroke-primary-focus-invert: var(--cds-color-emphasis-primary-background-weak);\n\n    > label {\n      margin-bottom: 0;\n\n      /* visually hidden but required for a11y */\n      display: none;\n    }\n\n    /* CDS overrides for Coach */\n\n    .cds-text-field-root {\n      /* textField component */\n      border-radius: var(--cds-spacing-100);\n      background-color: var(--cds-color-neutral-background-primary-weak);\n\n      /* remove border on the input field */\n\n      .cds-input-notchedOutline {\n        border: none;\n      }\n\n      /* text color */\n\n      .cds-input-input {\n        color: var(--cds-color-grey-700);\n      }\n\n      /* send suffix icon */\n\n      .cds-inputAdornment-filled {\n        padding: 0;\n        border-radius: var(--cds-spacing-100);\n\n        svg path {\n          fill: ",";\n        }\n      }\n\n      /* hover state */\n\n      &:hover {\n        .cds-input-notchedOutline {\n          border: 1px solid var(--cds-color-blue-600);\n        }\n      }\n\n      /* focus state */\n\n      &.cds-input-focused {\n        background-color: var(--cds-color-emphasis-neutral-background-xweak) !important;\n\n        .cds-input-notchedOutline {\n          border: 0 solid transparent;\n        }\n\n        .cds-input-input::placeholder {\n          color: var(--cds-color-interactive-secondary-inactive);\n        }\n\n        /* focus ring */\n\n        ::before {\n          border-radius: var(--cds-spacing-100);\n        }\n      }\n\n      /* send icon focus ring */\n\n      .cds-buttonBase-focusVisible {\n        &::after {\n          top: 4px;\n          left: 4px;\n          right: 4px;\n          bottom: 4px;\n        }\n      }\n\n      /* disabled state */\n\n      &.cds-input-readOnly {\n        .cds-input-input::placeholder {\n          color: var(--cds-color-grey-100);\n        }\n\n        svg path {\n          fill: var(--cds-color-grey-100);\n        }\n      }\n    }\n  "])),e?"var(--cds-color-neutral-disabled-strong)":"var(--cds-color-emphasis-neutral-background-xxstrong)")},container:Object(d.c)(Mn||(Mn=c()(["\n    padding: 0 var(--cds-spacing-200);\n  "])))};function Sender(e){var n,t=e.sendMessage,a=e.placeholder,i=e.disabledInput,r=e.autofocus,o=e.onTextInputChange,s=Object(M.c)((function(e){return{showChat:e.behavior.showChat,inputText:e.input.inputText,isMessageLoading:e.behavior.messageLoader}})),c=s.showChat,u=s.inputText,m=s.isMessageLoading,p=Object(l.useRef)(null),f=Object(l.useRef)(null),g=Object(On.c)(),h=Object(tn.e)(),v=null===(n=Object(hn.b)())||void 0===n?void 0:n.data;Object(l.useEffect)((function(){var e;c&&r&&(null===(e=p.current)||void 0===e||e.focus())}),[r,c]);var handleSendMessageClick=function(){u&&(t(u,R.d.TypedMessage),g({trackingData:{input_text:u,timestamp:Date.now()},trackingName:"ai_course_coach_chat_send_message",action:"click_send_message"}),v&&(h("interact_coach",B()(B()({coachInteractionType:"send_message",coach:{mode:v.mode}},v.courseId&&{product:{type:"course",id:v.courseId}}),v.itemId&&{courseItem:{id:v.itemId}})),h("send_coach_message",B()(B()({coachMessageText:u,coachMessageLength:u.length,coach:{mode:v.mode}},v.courseId&&{product:{type:"course",id:v.courseId}}),v.itemId&&{courseItem:{id:v.itemId}}))),te.dispatch(fe.s("")))},handlePaste=function(e){var n,t=null==e?void 0:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");t&&g({trackingData:{input_text:t,timestamp:Date.now()},trackingName:"ai_course_coach_chat_paste_message",action:"paste_message"})};Object(l.useEffect)((function(){var e=null;return p.current&&(e=p.current).addEventListener("paste",handlePaste),function(){e&&e.removeEventListener("paste",handlePaste)}}),[]);var b={onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessageClick())}};return Object(d.d)("div",{ref:f,css:Dn.container},Object(d.d)("div",{className:kn()("coach-new-message",{"coach-message-disable":m||i})},Object(d.d)(Fn.a,{fullWidth:!0,multiline:!0,minRows:1,maxRows:Pn,maxLength:Ln,label:Sn()("Ask #{coachName}",{coachName:"Coach"}),type:"text",readOnly:m||i,inputRef:p,placeholder:a,onChange:function(e){var n=e.target.value;o&&o(n),function(e){te.dispatch(fe.s(e))}(n)},value:u,inputProps:b,css:Dn.textBox(!u),"data-testid":"coach-send-message",suffix:Object(d.d)(yn.d,{tooltip:Sn()("Send message"),variant:"ghost",onClick:handleSendMessageClick,disabled:!u||m||i,"aria-label":Sn()("Send message"),"data-testid":"coach-send-button",icon:Rn||(Rn=Object(d.d)(In.h,null))})})))}var Bn,Hn,Vn,Un,qn,zn,Gn,Wn,Yn,Kn,Qn,Jn,$n,Xn,Zn,et,nt,tt,at,it,rt,ot,st,ct,dt,lt,ut,mt,pt,ft,gt,ht,vt,bt,kt,Ct,St,Ot,It,yt,wt,jt,xt,Et,Nt,_t,At,Tt,Mt,Rt,Ft,Pt,Lt,Dt,Bt,Ht,Vt,Ut,qt,zt,Gt,Wt,Yt,Kt,Qt,Jt,$t,Xt,Zt,ea,na,ta,aa,ia,ra,oa,sa,ca,da,la,ua,ma,pa,fa,ga,ha,va,ba,ka,Ca,Sa,Oa,Ia,ya,wa,ja,xa,Ea,Na,_a,Aa,Ta,Ma,Ra,Fa,Pa,La,Da,Ba,Ha,Va,Ua,qa,za,Ga,Wa,Ya,Ka,Qa,Ja,$a,Xa,Za,ei,ni,ti,ai,ii,ri,oi,si,ci,di,li,ui,mi,pi,fi=Object(l.forwardRef)(Sender),gi={actions:Object(d.c)(Bn||(Bn=c()(["\n    margin: 0 var(--cds-spacing-200);\n    display: flex;\n    gap: var(--cds-spacing-150);\n\n    "," {\n      flex-direction: column;\n\n      button {\n        width: 100%;\n        max-width: unset;\n      }\n    }\n  "])),Xe.a.down("sm"))},chat_view_ChatCompleteActions=function(e){var n=e.chatHasEnded,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.coachItemType,i=t.startNewChat,r=t.nextItemLink,o=t.authoringMode,s=t.courseId,c=t.itemId,u=t.setChatIsOpen,m=Object(M.c)((function(e){return e.sessionState.chatState})),p=Object(tn.e)(),f=Object(sn.d)(),onStartNewChatButtonClick=function(e){e&&p("interact_coach",{coachInteractionType:"click_action",coachAction:e,coach:{mode:R.g.CoachItem},product:{type:"course",id:s},courseItem:{id:c}}),i()};return m===R.f.ChatLimitReached?Object(d.d)("div",{css:gi.actions},Object(d.d)(nn.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_CHAT_LIMIT_REACHED_START_CHAT_INLINE")}},a===De.e.RolePlay?on()("Start a new session"):on()("Start a new chat"))):m===R.f.Ended||n?o?Object(d.d)("div",{css:gi.actions},Object(d.d)(nn.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")}},a===De.e.RolePlay?on()("Start a new session"):on()("Start a new chat"))):Object(d.d)("div",{css:gi.actions,"data-testid":"chat-end-buttons"},a===De.e.RolePlay&&Object(d.d)(nn.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")}},on()("Start a new session")),a===De.e.SocraticDialogue&&Object(d.d)(l.Fragment,null,r?Object(d.d)(tn.a,{onClick:function(){r&&f(r)},variant:"primary",trackingData:{button:{name:"coach_item_navigate_to_next_item_inline"}}},on()("Go to next item")):Object(d.d)(tn.a,{trackingData:{button:{name:"coach_item_close_chat_inline"}},onClick:function(){return u(!1)},variant:"primary"},on()("Close chat"))),Object(d.d)(tn.a,{variant:"secondary","data-pendo":a===De.e.RolePlay?Re.p:Re.n,trackingData:{button:{name:"coach_item_provide_feedback_inline"}}},on()("Provide feedback"))):null},hi=Object(d.c)(Hn||(Hn=c()(["\n  margin-bottom: var(--cds-spacing-300);\n\n  > p {\n    margin-bottom: var(--cds-spacing-200);\n    text-align: center;\n    color: var(--cds-color-neutral-primary-weak);\n  }\n"]))),chat_view_ChatEndedMessage=function(){var e=function(e){switch(e){case R.f.Ended:return on()("The activity has ended.");case R.f.ChatLimitReached:return on()("You’ve reached the chat limit.");default:return}}(Object(M.c)((function(e){return e.sessionState.chatState})));return e?Object(d.d)("div",{css:hi},Object(d.d)(en.a,{component:"p"},e),Object(d.d)(en.a,{component:"p"},on()("Start a new chat to clear your chat history and start fresh."))):null},vi=n("2yix"),bi={loadingContainer:Object(d.c)(Vn||(Vn=c()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(d.c)(Un||(Un=c()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),Re.b+"px"),chatActionContainer:Object(d.c)(qn||(qn=c()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),Re.b+"px"),startActionButton:Object(d.c)(zn||(zn=c()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(d.c)(Gn||(Gn=c()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_DialogueChatActions=function(e){var n=e.onClickEndDialogueButton,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.dialogueError,i=t.isDialogueLoading,r=t.sendMessage,o=Object(M.c)((function(e){return e.sessionState})).chatState,s=Object(M.c)((function(e){var n=e.behavior;return{messages:e.messages,behavior:n,sessionState:e.sessionState}})),c=s.behavior,l=c.disabledInput,u=c.messageLoader,m=s.messages.messages,p=o===R.f.Active,f=m[m.length-1],g=!useCoachItemSendMessage_getStartedRecommendedAction(null==f?void 0:f.recommendedActions);return a?null:i?Object(d.d)("div",{css:bi.chatActionContainer},Object(d.d)(vi.a,{variant:"rect",height:48,css:bi.loadingContainer})):g&&p?Object(d.d)("div",{css:bi.senderContainer},Object(d.d)(fi,{sendMessage:r,placeholder:on()("Message Coach"),disabledInput:l||!p,autofocus:!0}),Object(d.d)(yn.b,{size:"small",variant:"secondary",onClick:n,css:bi.coachButton,disabled:u},on()("End Dialogue"))):null},ki=n("7NTc"),Ci=n("rzCt"),Si=n("fguj"),Oi=n("7NrJ"),Ii=ki.a.HeadingGroup,yi=ki.a.Content,wi=ki.a.Actions,ji={introductoryText:Object(d.c)(Wn||(Wn=c()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(d.c)(Yn||(Yn=c()(["\n    padding-left: 0;\n  "])))},xi=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),chat_view_EndDialogueDialog=function(e){var n=e.onClose,t=e.isOpen,a=l.useState(xi.DEFAULT),i=T()(a,2),r=i[0],o=i[1],s=useCoachItemChatContext_useCoachItemChatContext().sendMessage,c=Object(tn.e)();return Object(d.d)(ki.a,{open:t,onClose:n},Object(d.d)(Ii,null,on()("Would you like to end this session?")),Object(d.d)(yi,null,Object(d.d)(en.a,{css:ji.introductoryText,component:"p"},on()("Please note that you will not be able to resume it, but you can always start a new one from the beginning.")),Object(d.d)(Ci.a,{label:on()("Reason for ending"),optional:!0,"data-testid":"end-dialogue-reason-select-field",placeholder:on()("Select a reason"),supportText:on()("We would appreciate your feedback to help us improve the experience."),onChange:function(e){var n=e.target.value;o(n)}},Object.values(xi).map((function(e){return Object(d.d)(Si.a,{key:e,value:e},function(e){switch(e){case xi.FEEL_STUCK:return on()("I feel stuck and can't complete the activity");case xi.TECHNICAL_ISSUES:return on()("I'm experiencing technical issues");case xi.TIME_CONSTRAINT:return on()("I don't have time to finish");case xi.NOT_VALUABLE:return on()("This isn't engaging or valuable for me");case xi.DISLIKE_ITEM_TYPE:return on()("I'd prefer a different way to learn");case xi.DEFAULT:default:return on()("No reason provided")}}(e))}))),Object(d.d)(wi,{css:ji.actionButtons},Object(d.d)(Oi.a,{alternateButtonProps:{children:on()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:on()("Yes, end the Dialogue"),onClick:function(){s("Generate final session summary",R.d.CoachItemStuckEnd),c("end_coach_item_session",{coachItemSessionEndReason:r,courseItem:{type:"dialogue"}}),n()}}}))))},Ei={root:Object(d.c)(Kn||(Kn=c()(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  "])))},chat_view_ErrorView=function(e){var n=e.error,t=l.useCallback((function(){return"NO_MESSAGES"===n.type?on()("Something went wrong in getting your previous chat. Please contact support for help, or start a new chat."):on()("Please refresh your page. If you continue to see this error, please contact support for help.")}),[n]);return Object(d.d)(en.a,{component:"div",css:Ei.root},t())},Ni={conversationContainer:Object(d.c)(Qn||(Qn=c()(["\n    height: 100%;\n  "]))),conversation:Object(d.c)(Jn||(Jn=c()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-primary-invert);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Xe.a.down("xs")),headerContainer:Object(d.c)($n||($n=c()(["\n    flex-grow: 0;\n    border-bottom: 1px solid #dae1ed;\n  "]))),messageContainer:Object(d.c)(Xn||(Xn=c()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),messageContainerResponses:Object(d.c)(Zn||(Zn=c()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Re.b+"px"),coachAvatarContainer:Object(d.c)(et||(et=c()(["\n    width: 36px;\n    height: 36px;\n    background: var(--cds-color-interactive-stroke-primary-focus-invert);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n  "]))),endStateContainer:Object(d.c)(nt||(nt=c()(["\n    margin: 0 auto var(--cds-spacing-200);\n    width: 100%;\n  "]))),senderContainer:Object(d.c)(tt||(tt=c()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),Re.b+"px"),footerContainer:Object(d.c)(at||(at=c()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),Re.b+"px")},chat_view_ChatConversation=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.courseId,t=e.isDialogueLoading,a=e.dialogueError,i=e.sendMessage,r=e.dialogueSessionId,o=e.authorCoachItemSyncNotification,s=l.useState(!1),c=T()(s,2),u=c[0],m=c[1],handleToggleEndDialogueDialog=function(){m(!u)};return Object(d.d)("div",{css:Ni.conversation},Object(d.d)("div",{css:Ni.messageContainer},t&&Object(d.d)(LoadingView,{labelMessage:on()("Loading...")}),a&&Object(d.d)(chat_view_ErrorView,{error:a}),Object(d.d)("div",{css:Ni.messageContainerResponses},!t&&!a&&Object(d.d)(l.Fragment,null,Object(d.d)(K.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:function(e,n){e.trim()&&i(e,n)},courseId:n,hideMessage:function(e){var n=e.message;return 0===e.index||n.action===R.d.CoachItemSummary||"Generate final session summary"===(null==n?void 0:n.text)||n.action===R.d.CoachItemStuckEnd},chatSessionId:r}),Object(d.d)("div",{css:Ni.endStateContainer},it||(it=Object(d.d)(chat_view_ChatEndedMessage,null)),rt||(rt=Object(d.d)(chat_view_ChatCompleteActions,null)))))),o&&o,Object(d.d)(chat_view_EndDialogueDialog,{onClose:handleToggleEndDialogueDialog,isOpen:u}),ot||(ot=Object(d.d)(vn.a,{color:"light",orientation:"horizontal"})),Object(d.d)(chat_view_DialogueChatActions,{onClickEndDialogueButton:handleToggleEndDialogueDialog}),Object(d.d)("div",{css:Ni.footerContainer},st||(st=Object(d.d)(components_Footer,null))))},_i=ki.a.HeadingGroup,Ai=ki.a.Content,Ti=ki.a.Actions,Mi={introductoryText:Object(d.c)(ct||(ct=c()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(d.c)(dt||(dt=c()(["\n    padding-left: 0;\n  "])))},Ri=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),EndRolePlayDialog_getEndRolePlayMessage=function(e){switch(e){case Ri.FEEL_STUCK:return on()("I feel stuck and can't complete the activity");case Ri.TECHNICAL_ISSUES:return on()("I'm experiencing technical issues");case Ri.TIME_CONSTRAINT:return on()("I don't have time to finish right now");case Ri.NOT_VALUABLE:return on()("This isn't engaging or valuable for me");case Ri.DISLIKE_ITEM_TYPE:return on()("I'd prefer a different way to learn");case Ri.DEFAULT:default:return on()("Reason not provided")}},chat_view_EndRolePlayDialog=function(e){var n=e.onClose,t=e.isOpen,a=l.useState(Ri.DEFAULT),i=T()(a,2),r=i[0],o=i[1],s=useCoachItemChatContext_useCoachItemChatContext(),c=s.sendMessage,u=s.trackingData,m=Object(tn.e)(),p=function(){var e=N()(x()().mark((function _callee(){var e;return x()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m("interact_coach",B()({coachInteractionType:"click_action",coachAction:R.d.CoachItemStuckEnd},u)),e=EndRolePlayDialog_getEndRolePlayMessage(r),c(e,R.d.CoachItemStuckEnd),n();case 4:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(d.d)(ki.a,{open:t,onClose:n},Object(d.d)(_i,null,on()("End the role-play simulation?")),Object(d.d)(Ai,null,Object(d.d)(en.a,{css:Mi.introductoryText,component:"p"},on()("You won’t be able to resume this session, but you can always start a new one from the beginning.")),Object(d.d)(Ci.a,{label:on()("Reason for ending"),optional:!0,"data-testid":"end-role-play-reason-select-field",placeholder:on()("Select a reason"),supportText:on()("Please share why you're ending early to help us improve the experience."),onChange:function(e){var n=e.target.value;o(n)}},Object.values(Ri).map((function(e){return Object(d.d)(Si.a,{key:e,value:e},EndRolePlayDialog_getEndRolePlayMessage(e))}))),Object(d.d)(Ti,{css:Mi.actionButtons},Object(d.d)(Oi.a,{alternateButtonProps:{children:on()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:on()("Yes, end the role-play"),onClick:p}}))))},Fi={startActionButton:Object(d.c)(lt||(lt=c()(["\n    margin-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatLearnerStartScenario=function(e){var n=e.onStartButtonClick,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.isRolePlayJSONLoading,i=t.startRolePlaySimulation,r=t.trackingData,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.requestTaskList,c=o.handleInitialTaskLoad,l=Object(tn.e)(),u=function(){var e=N()(x()().mark((function _callee(){var e;return x()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l("interact_coach",B()({coachInteractionType:"click_action",coachAction:R.d.CoachItemGenerateScenario},r)),t.next=3,i();case 3:if(!(e=t.sent)){t.next=9;break}return null==n||n(e),c(),t.next=9,s(e);case 9:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(d.d)(nn.a,{onClick:u,size:"medium",variant:"primary",loading:a,css:Fi.startActionButton},on()("Start the scenario"))},chat_view_RolePlayChatSender=function(e){var n=e.coachPersona,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.rolePlayIntroSessionId,i=t.sendMessage,r=Object(M.c)((function(e){return e.sessionState})).chatSessionId,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.taskChatSessionId,c=o.tasks,l=o.requestTaskTracking,u=Object(M.c)((function(e){return e.behavior})).disabledInput,m=function(){var e=N()(x()().mark((function _callee(e,n){return x()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e,n);case 2:if(null==c||!c.length){t.next=5;break}return t.next=5,l(s,c);case 5:case"end":return t.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}();return Object(d.d)(fi,{sendMessage:m,placeholder:on()("Message #{coachPersonaName}",{coachPersonaName:(null==n?void 0:n.name)||"Coach"}),disabledInput:u||r===a,autofocus:!0})},Pi={loadingContainer:Object(d.c)(ut||(ut=c()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(d.c)(mt||(mt=c()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),Re.b+"px"),chatActionContainer:Object(d.c)(pt||(pt=c()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),Re.b+"px"),startActionButton:Object(d.c)(ft||(ft=c()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(d.c)(gt||(gt=c()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatActions=function(e){var n=e.coachPersona,t=e.onStartButtonClick,a=e.onClickEndRolePlayButton,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayChatLoadingError,o=i.isRolePlayLoading,s=i.rolePlaySimulationSessionId,c=i.rolePlayDebriefSessionId,u=i.rolePlayDebriefCreationError,m=i.rolePlaySimulationCreationError,p=i.rolePlayIntroCreationError,f=i.startRolePlaySimulation,g=i.isRolePlayJSONLoading,h=i.authoringMode,v=i.trackingData,b=Object(M.c)((function(e){return e.sessionState})),k=b.chatState,C=b.chatSessionId,S=Object(M.c)((function(e){return e.behavior})).messageLoader,O=useRolePlayTasksContext_useRolePlayTasksContext().requestTaskList,I=Object(tn.e)(),y=C===c,w=k===R.f.Active,j=w&&!!s&&!y,E=w&&!s,A=!h,T=r||p||m||u,F=function(){var e=N()(x()().mark((function _callee(){var e;return x()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return I("interact_coach",B()({coachInteractionType:"click_action",coachAction:R.d.CoachItemGenerateScenario},v)),n.next=3,f();case 3:if(!(e=n.sent)){n.next=8;break}return null==t||t(e),n.next=8,O(e);case 8:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return T?null:o?Object(d.d)("div",{css:Pi.chatActionContainer},Object(d.d)(vi.a,{variant:"rect",height:48,css:Pi.loadingContainer})):E?Object(d.d)("div",{css:Pi.chatActionContainer,"data-testid":"chat-start-button"},A?Object(d.d)(chat_view_RolePlayChatLearnerStartScenario,{onStartButtonClick:t}):Object(d.d)(nn.a,{onClick:F,size:"medium",variant:"primary",loading:g,css:Pi.startActionButton},on()("Start the scenario"))):j?Object(d.d)("div",{css:Pi.senderContainer},Object(d.d)(l.Fragment,null,Object(d.d)(yn.b,{size:"small",variant:"secondary",onClick:a,css:Pi.coachButton,disabled:S},on()("End role-play")),Object(d.d)(chat_view_RolePlayChatSender,{coachPersona:n}))):c?Object(d.d)("div",{css:Pi.chatActionContainer},S?ht||(ht=Object(d.d)(vi.a,{variant:"rect",height:48})):vt||(vt=Object(d.d)(chat_view_ChatCompleteActions,{chatHasEnded:!0}))):null},Li=n("nNSt"),Di={sessionTitle:Object(d.c)(bt||(bt=c()(["\n    margin: var(--cds-spacing-600) 0;\n    padding-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatSession=function(e){var n=e.title,t=e.children;return Object(d.d)("div",null,Object(d.d)("div",{css:Di.sessionTitle},Object(d.d)(en.a,{component:"h2",variant:"titleSmall"},n)),Object(d.d)("div",null,t))},Bi={messageContainerResponses:Object(d.c)(kt||(kt=c()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Re.b+"px"),notification:Object(d.c)(Ct||(Ct=c()(["\n    margin-bottom: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayDebriefSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.courseId,i=t.rolePlayDebriefCreationError,r=t.rolePlayDebriefSessionId,o=t.startNewChat,s=t.sendMessage,c=t.createRolePlayDebrief,u=t.setRolePlayDebriefCreationError,m=t.trackingData,p=Object(tn.e)(),f=l.useState(!0),g=T()(f,2),h=g[0],v=g[1],b=l.useRef(null);l.useEffect((function(){var e,n;b.current&&(null===(e=(n=b.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[r,i]);var k=function(){var e=N()(x()().mark((function _callee(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("interact_coach",B()(B()({},m),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_REGENERATE_FEEDBACK"})),u(null),v(!1),e.next=5,c();case 5:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),handleStartNewChatClick=function(){p("interact_coach",B()(B()({},m),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_ERROR_START_NEW_CHAT"})),o()};return i?Object(d.d)(l.Fragment,null,Object(d.d)("div",{ref:b,css:Bi.messageContainerResponses},Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Feedback session")},h?Object(d.d)(Li.a,{css:Bi.notification,severity:"error",actions:Object(d.d)(Oi.a,{size:"small",primaryButtonProps:{children:"Regenerate response",onClick:k},alternateButtonProps:{variant:"ghost",children:"Start a new session",onClick:handleStartNewChatClick}})},on()("Something went wrong. Try regenerating the response, or start a new session.")):Object(d.d)(Li.a,{css:Bi.notification,severity:"error",actions:Object(d.d)(nn.a,{size:"small",onClick:handleStartNewChatClick},on()("Start a new session"))},on()("Something went wrong. Start a new session to try again"))))):r?Object(d.d)(l.Fragment,null,Object(d.d)("div",{ref:b,css:Bi.messageContainerResponses},Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Feedback session")},Object(d.d)(K.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:s,courseId:a,hideMessage:n,chatSessionId:r})))):null},Hi={messageContainerResponses:Object(d.c)(St||(St=c()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Re.b+"px")},chat_view_RolePlayIntroSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.courseId,i=t.trackingData,r=t.rolePlayIntroSessionId,o=t.rolePlayIntroCreationError,s=t.startNewChat,c=t.sendMessage,l=Object(tn.e)();return o?Object(d.d)("div",{css:Hi.messageContainerResponses},Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Scenario overview")},Object(d.d)(Li.a,{severity:"error",actions:Object(d.d)(nn.a,{size:"small",onClick:function(){l("interact_coach",B()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_INTRO_ERROR_START_NEW_CHAT"},i)),s()}},on()("Start a new session"))},on()("Something went wrong. Start a new session to try again")))):r?Object(d.d)("div",{css:Hi.messageContainerResponses},Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Scenario overview")},Object(d.d)(K.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:function(e,n){e.trim()&&c(e,n)},courseId:a,hideMessage:n,chatSessionId:r,forceHideMessageLoader:!0}))):null},Vi={container:Object(d.c)(Ot||(Ot=c()(["\n    margin: 0 var(--cds-spacing-200);\n  "]))),divider:Object(d.c)(It||(It=c()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayEndState=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.rolePlayAiPersonaTitle,t=e.rolePlayDebriefSessionId,a=Object(M.c)((function(e){return e.sessionState})),i=a.chatState,r=a.chatSessionId;return i===R.f.Ended||t&&t===r?Object(d.d)("div",{css:Vi.container},Object(d.d)(vn.a,{color:"light",orientation:"horizontal",css:Vi.divider}),Object(d.d)(en.a,{component:"p",color:"supportText"},on()("#{aiPersonaRole} has left. The Role-play activity has ended.",{aiPersonaRole:n})),Object(d.d)(vn.a,{color:"light",orientation:"horizontal",css:Vi.divider})):null},Ui={endStateContainer:Object(d.c)(yt||(yt=c()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),divider:Object(d.c)(wt||(wt=c()(["\n    margin: var(--cds-spacing-600) 0;\n  "]))),messageContainerResponses:Object(d.c)(jt||(jt=c()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Re.b+"px")},chat_view_RolePlaySimulationSession=function(e){var n=e.coachPersona,t=e.hideMessage,a=e.isRolePlayTaskResponseLoading,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.courseId,o=i.trackingData,s=i.rolePlaySimulationSessionId,c=i.rolePlaySimulationCreationError,u=i.startNewChat,m=i.sendMessage,p=Object(tn.e)();return c?Object(d.d)(l.Fragment,null,Object(d.d)("div",{css:Ui.messageContainerResponses},Object(d.d)(vn.a,{css:Ui.divider,color:"light",orientation:"horizontal"}),Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Role-play simulation")},Object(d.d)(Li.a,{severity:"error",actions:Object(d.d)(nn.a,{size:"small",onClick:function(){p("interact_coach",B()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_SIMULATION_ERROR_START_NEW_CHAT"},o)),u()}},on()("Start a new session"))},on()("Something went wrong. Start a new session to try again"))))):s?Object(d.d)(l.Fragment,null,Object(d.d)("div",{css:Ui.messageContainerResponses},Object(d.d)(vn.a,{css:Ui.divider,color:"light",orientation:"horizontal"}),Object(d.d)(chat_view_RolePlayChatSession,{title:on()("Role-play simulation")},Object(d.d)(K.g,{profileClientAvatar:void 0,coachPersona:n,homeView:void 0,sendMessage:function(e,n){e.trim()&&m(e,n)},courseId:r,hideMessage:t,chatSessionId:s,forceShowMessageLoader:a}),Object(d.d)("div",{css:Ui.endStateContainer},xt||(xt=Object(d.d)(chat_view_RolePlayEndState,null)))))):null},qi={messageContainer:Object(d.c)(Et||(Et=c()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),messageContainerResponses:Object(d.c)(Nt||(Nt=c()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Re.b+"px")},chat_view_RolePlayChatSessions=function(e){var n=e.coachPersona,t=e.isTaskResponseLoading,a=useCoachItemChatContext_useCoachItemChatContext(),i=a.isRolePlayLoading,r=a.rolePlayChatLoadingError,hideMessage=function(e){var n,a=e.message,i=e.index,r=e.messages;return!!(0===i||a.action===R.d.CoachItemSummary||"Generate final session summary"===(null==a?void 0:a.text)||a.action===R.d.CoachItemGenerateScenario||(null==a?void 0:a.text)===Re.j||a.action===R.d.CoachItemGenerateJson||(null==a?void 0:a.text)===Re.i||r[i-1].action===R.d.CoachItemGenerateJson||(null===(n=r[i-1])||void 0===n?void 0:n.text)===Re.i||a.action===R.d.CoachItemStuckEnd||"Chat session ended by user"===(null==a?void 0:a.text)||i===r.length-1&&t)};return i?Object(d.d)("div",{css:qi.messageContainer},Object(d.d)(LoadingView,{labelMessage:on()("Loading...")})):r?Object(d.d)("div",{css:qi.messageContainer},Object(d.d)(chat_view_ErrorView,{error:r})):Object(d.d)("div",{css:qi.messageContainer},Object(d.d)(chat_view_RolePlayIntroSession,{hideMessage:hideMessage}),Object(d.d)(chat_view_RolePlaySimulationSession,{coachPersona:n,hideMessage:hideMessage,isRolePlayTaskResponseLoading:t}),Object(d.d)(chat_view_RolePlayDebriefSession,{hideMessage:hideMessage}))},icons_AiPersonaAvatar=function(){return _t||(_t=l.createElement("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"ai-persona-avatar"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1566 9.46715C24.0384 9.17762 23.6284 9.17762 23.5102 9.46715L23.0061 10.7018C22.8879 10.9914 22.6581 11.2211 22.3686 11.3394L21.1339 11.8435C20.8444 11.9617 20.8444 12.3717 21.1339 12.4899L22.3686 12.994C22.6581 13.1122 22.8879 13.342 23.0061 13.6315L23.5102 14.8662C23.6284 15.1557 24.0384 15.1557 24.1566 14.8662L24.6607 13.6315C24.7789 13.342 25.0087 13.1122 25.2982 12.994L26.5329 12.4899C26.8225 12.3717 26.8225 11.9617 26.5329 11.8435L25.2982 11.3394C25.0087 11.2211 24.7789 10.9914 24.6607 10.7018L24.1566 9.46715ZM17.567 11.5567C17.3698 11.0737 16.6858 11.0737 16.4886 11.5567L15.42 14.1739C14.8284 15.6229 13.6785 16.7729 12.2295 17.3645L9.61227 18.433C9.12925 18.6302 9.12924 19.3142 9.61227 19.5114L12.2295 20.58C13.6785 21.1716 14.8284 22.3215 15.42 23.7705L16.4886 26.3877C16.6858 26.8707 17.3698 26.8707 17.567 26.3877L18.6355 23.7705C19.2271 22.3215 20.3771 21.1716 21.8261 20.58L24.4433 19.5114C24.9263 19.3142 24.9263 18.6302 24.4433 18.433L21.8261 17.3645C20.3771 16.7729 19.2271 15.6229 18.6355 14.1739L17.567 11.5567Z",fill:"url(#paint0_linear_1116_1338)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_1116_1338",x1:"7.92598",y1:"26.75",x2:"31.614",y2:"26.1636",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#0048B0"}),l.createElement("stop",{offset:"1",stopColor:"#1E72EB"})))))},zi={conversationContainer:Object(d.c)(At||(At=c()(["\n    height: 100%;\n  "]))),conversation:Object(d.c)(Tt||(Tt=c()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-primary-invert);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Xe.a.down("xs")),headerContainer:Object(d.c)(Mt||(Mt=c()(["\n    flex-grow: 0;\n    border-bottom: 1px solid #dae1ed;\n  "]))),coachAvatarContainer:Object(d.c)(Rt||(Rt=c()(["\n    width: 36px;\n    height: 36px;\n    background: var(--cds-color-interactive-stroke-primary-focus-invert);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n  "]))),endStateContainer:Object(d.c)(Ft||(Ft=c()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),footerContainer:Object(d.c)(Pt||(Pt=c()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),Re.b+"px"),divider:Object(d.c)(Lt||(Lt=c()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayChatConversation=function(e){var n=e.onStartButtonClick,t=e.isTaskResponseLoading,a=l.useState(!1),i=T()(a,2),r=i[0],o=i[1],s=useCoachItemChatContext_useCoachItemChatContext(),c=s.rolePlayAiPersonaTitle,u=s.rolePlaySimulationSessionId,m=s.authorCoachItemSyncNotification,p=c&&!!u?{name:c,avatar:Object(d.d)(Ze.a,{css:zi.coachAvatarContainer},Dt||(Dt=Object(d.d)(icons_AiPersonaAvatar,null)))}:void 0,handleToggleEndRolePlayDialog=function(){o(!r)};return Object(d.d)("div",{css:zi.conversation},Object(d.d)(chat_view_RolePlayChatSessions,{coachPersona:p,isTaskResponseLoading:t}),m&&m,Object(d.d)(chat_view_EndRolePlayDialog,{onClose:handleToggleEndRolePlayDialog,isOpen:r}),Bt||(Bt=Object(d.d)(vn.a,{color:"light",orientation:"horizontal"})),Object(d.d)(chat_view_RolePlayChatActions,{coachPersona:p,onClickEndRolePlayButton:handleToggleEndRolePlayDialog,onStartButtonClick:n}),Object(d.d)("div",{css:zi.footerContainer},Object(d.d)(components_Footer,{coachPersona:p&&B()(B()({},p),{},{name:"This Role-play activity"})})))},Gi={coachItemContainer:Object(d.c)(Ht||(Ht=c()(["\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    overflow-y: hidden;\n\n    "," {\n      margin-top: 1px;\n    }\n\n    .coach-new-message {\n      width: 100%;\n    }\n\n    .coach-input {\n      height: 60px;\n    }\n  "])),Xe.a.down("xs"))},chat_view_ChatView=function(e){var n=e.onStartButtonClick,t=e.isTaskResponseLoading,a=useCoachItemChatContext_useCoachItemChatContext(),i=a.courseId,r=a.itemId,o=a.authoringMode,s=a.coachItemType,c=Object(S.a)(o),u=Object(tn.e)();return l.useEffect((function(){u("interact_coach",B()(B()({coachInteractionType:"launch_coach_tool",coach:{mode:c}},i&&{product:{type:"course",id:i}}),r&&{courseItem:{id:r}}))}),[i,r,c,u]),Object(d.d)("div",{"data-testid":"coursera-coach-item",id:"coursera-coach-item",css:Gi.coachItemContainer},Object(d.d)(hn.a,{value:{data:{mode:c,courseId:i,itemId:r}}},s===De.e.SocraticDialogue&&(Vt||(Vt=Object(d.d)(chat_view_ChatConversation,null))),s===De.e.RolePlay&&Object(d.d)(chat_view_RolePlayChatConversation,{onStartButtonClick:n,isTaskResponseLoading:t})))},Wi=n("/jXm"),Yi=n.n(Wi),Ki={img:Object(d.c)(Ut||(Ut=c()(["\n    button[aria-disabled='true'] & {\n      opacity: 0.1;\n    }\n  "])))},chat_view_HowAmIDoingButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(tn.e)();return Object(d.d)(yn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_HOW_AM_I_DOING",coach:{mode:R.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(Re.m,R.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":on()("How am I doing?"),icon:Object(d.d)("img",{css:Ki.img,height:"16",width:"16",src:Yi.a,alt:""}),disabled:a,css:t},on()("How am I doing?"))},Qi=n("84CE"),Ji=n.n(Qi),$i={img:Object(d.c)(qt||(qt=c()(["\n    button[aria-disabled='true'] & {\n      opacity: 0.1;\n    }\n  "])))},chat_view_ImStuckButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(tn.e)();return Object(d.d)(yn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_I_AM_STUCK",coach:{mode:R.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(Re.c,R.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":on()("I'm stuck"),icon:Object(d.d)("img",{css:$i.img,height:"16",width:"16",src:Ji.a,alt:""}),disabled:a,css:t},on()("I'm stuck"))},Xi=tn.b.HeadingGroup,Zi=tn.b.Content,er=tn.b.Actions,nr={dialogActions:Object(d.c)(zt||(zt=c()(["\n    "," {\n      flex-direction: column;\n\n      button {\n        max-width: 100%;\n        width: 100%;\n      }\n    }\n  "])),Xe.a.down("sm"))},chat_view_NewChatButton=function(e){var n=e.onClick,t=e.onConfirm,a=e.useIconButton,i=e.style,r=e.disabled,o=l.useState(!1),s=T()(o,2),c=s[0],u=s[1],m=Object(tn.e)(),p=useCoachItemChatContext_useCoachItemChatContext(),f=p.startNewChat,g=p.courseId,h=p.itemId,v=p.coachItemType,closeDialog=function(){u(!1),null==n||n()},b=function(){var e=N()(x()().mark((function _callee(){return x()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_NEW_CHAT_DIALOG",coach:{mode:R.g.CoachItem},product:{type:"course",id:g},courseItem:{id:h}}),f(),closeDialog(),null==t||t();case 4:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),onNewChatButtonClick=function(){m("click_button",{button:{name:"coach_item_new_chat"}}),u(!0)};return Object(d.d)(l.Fragment,null,a?Object(d.d)(yn.d,{onClick:onNewChatButtonClick,icon:Gt||(Gt=Object(d.d)(In.g,null)),"aria-label":v===De.e.RolePlay?on()("New session"):on()("New chat"),disabled:r,tooltip:v===De.e.RolePlay?on()("New session"):on()("New chat"),css:i}):Object(d.d)(yn.b,{onClick:onNewChatButtonClick,size:"medium",variant:"ghost",iconPosition:"before","aria-label":v===De.e.RolePlay?on()("New session"):on()("New chat"),icon:Wt||(Wt=Object(d.d)(In.g,null)),disabled:r,css:i},v===De.e.RolePlay?on()("New session"):on()("New chat")),Object(d.d)(tn.b,{"aria-describedby":"coach-item-new-chat-dialog-content",sticky:"actions",trackingData:{modal:{name:"coach_item_new_chat_dialog"}},open:c,variant:"transactional",onClose:closeDialog},Object(d.d)(Xi,null,on()("Are you sure?")),Object(d.d)(Zi,{id:"coach-item-new-chat-dialog-content"},Object(d.d)(en.a,{component:"p"},v===De.e.RolePlay?on()("If you start a new session, this one will disappear."):on()("If you start a new chat, this one will disappear."))),Object(d.d)(er,null,Object(d.d)(Ze.a,{container:!0,spacing:16,css:nr.dialogActions},Object(d.d)(Ze.a,{item:!0},Object(d.d)(nn.a,{variant:"primary",size:"medium",onClick:b},v===De.e.RolePlay?on()("Yes, start a new session"):on()("Yes, start a new chat"))),Object(d.d)(Ze.a,{item:!0},Object(d.d)(nn.a,{variant:"secondary",size:"medium",onClick:closeDialog},on()("Cancel")))))))},tr=n("9rZX"),ar=n.n(tr),ir=n("wr+D"),rr=n("+Fz1"),or=n("5ydG"),sr={headerRight:Object(d.c)(Yt||(Yt=c()(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "]))),headerLeft:Object(d.c)(Kt||(Kt=c()(["\n    overflow: hidden;\n  "]))),tunnelVisionContentContainer:Object(d.c)(Qt||(Qt=c()(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),closeElementContainer:Object(d.c)(Jt||(Jt=c()(["\n    display: flex;\n    align-items: center;\n  "]))),tunnelVision:Object(d.c)($t||($t=c()(["\n    .rc-TunnelVision div[data-classname='tunnelvision-window-0'] {\n      "," {\n        margin-left: 0;\n      }\n    }\n\n    .rc-TunnelVisionHeader {\n      > div {\n        overflow-x: hidden;\n      }\n    }\n\n    .rc-TunnelVisionClose {\n      background-color: var(--cds-color-neutral-primary-invert);\n      margin-right: var(--cds-spacing-100);\n\n      &:focus,\n      &:hover {\n        background-color: var(--cds-color-interactive-stroke-primary-focus-invert);\n      }\n\n      "," {\n        margin-right: var(--cds-spacing-200);\n      }\n    }\n  "])),Xe.a.down("sm"),Xe.a.up("md"))},TunnelVisionWrapper_TunnelVisionWrapper=function(e){var n=e.onClose,t=e.headerLeft,a=e.headerRight,i=e.topBanner,r=e.children,o=e.ariaLabel,s=e.backbuttonAriaLabel,c=e.shouldConfirmClose,u=l.useState(!1),m=T()(u,2),p=m[0],f=m[1],g=l.useState(!1),h=T()(g,2),v=h[0],b=h[1],k=l.useState(null),C=T()(k,2),S=C[0],O=C[1],I=l.useRef(null),scrollPage=function(e){I.current&&I.current.scrollTo(0,e)},y=l.useCallback((function(e){if(I.current){var n=I.current.scrollTop||0;switch(e.keyCode){case 38:if(n<=0)return;scrollPage(n-50);break;case 33:if(n<=0)return;scrollPage(n-I.current.clientHeight);break;case 36:scrollPage(0);break;case 40:if(n>=I.current.scrollHeight)return;scrollPage(n+50);break;case 34:if(n>=I.current.scrollHeight)return;scrollPage(n+I.current.clientHeight);break;case 35:scrollPage(I.current.scrollHeight)}}}),[]);l.useEffect((function(){return ar.a.setAppElement("#rendered-content"),f(!0),document.addEventListener("keydown",y),function(){document.removeEventListener("keydown",y)}}),[y]);return Object(d.d)(ar.a,{style:{overlay:{position:"relative",zIndex:4e3}},isOpen:p,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:sr.tunnelVision},Object(d.d)(rr.a,{onClose:n,disableKeyPress:!0,shouldAllowClose:function(e){return!c||(b(!0),O(e||null),!1)},closeElement:Xt||(Xt=Object(d.d)(ir.a,null)),headerElement:Object(d.d)(Ze.a,{container:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header"},Object(d.d)(Ze.a,{item:!0,xs:9,sm:8,md:6,css:sr.headerLeft},t),Object(d.d)(Ze.a,{item:!0,xs:3,sm:4,md:6,justifyContent:"flex-end",css:sr.headerRight},a)),ariaLabel:o,backbuttonAriaLabel:s},Object(d.d)(Ze.a,{ref:I,css:sr.tunnelVisionContentContainer,id:"TUNNELVISIONWRAPPER_CONTENT_ID","data-testid":"tunnel-vision-content"},i&&Object(d.d)(Ze.a,{role:"alert","aria-live":"assertive"},i),r),v&&Object(d.d)(or.a,{onPrimaryButtonClick:function(){b(!1),O(null),S&&S()},onCancelButtonClick:function(){b(!1),O(null)}})))},cr={itemName:Object(d.c)(Zt||(Zt=c()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),itemNameSupportText:Object(d.c)(ea||(ea=c()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),headerRight:Object(d.c)(na||(na=c()(["\n    margin-right: var(--cds-spacing-150);\n    width: 100%;\n  "]))),menuButton:Object(d.c)(ta||(ta=c()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),menuItemButton:Object(d.c)(aa||(aa=c()(["\n    max-width: unset;\n    width: 100%;\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: var(--cds-spacing-100);\n\n    img,\n    svg {\n      /* To override the CDS gap between icon and text */\n      margin-right: var(--cds-spacing-200) !important;\n    }\n  "])))},dr=pn.a.HeadingGroup,lr=pn.a.Content,chat_view_DialogueChatViewTunnelVision=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.coachItemType,t=e.isDialogueLoading,a=e.itemName,i=e.chatIsOpen,r=e.setChatIsOpen,o=Object(tn.e)(),s=Object(M.c)((function(e){return e.sessionState.chatState})),c=Object(M.c)((function(e){return e.messages.messages})),u=c[c.length-1],m=!useCoachItemSendMessage_getStartedRecommendedAction(null==u?void 0:u.recommendedActions),p=Object(M.c)((function(e){return e.behavior.messageLoader})),f=!m||p,g=l.useState(!1),h=T()(g,2),v=h[0],b=h[1],k=Object(fn.a)(Xe.a.down("sm")),closeActionsDialog=function(){b(!1)};return i?Object(d.d)(TunnelVisionWrapper_TunnelVisionWrapper,{onClose:function(){o("click_button",{button:{name:"coach_item_tv_back_button"}}),r(!1)},ariaLabel:on()("Dialogue"),backbuttonAriaLabel:on()("Close dialogue"),headerLeft:Object(d.d)("div",null,Object(d.d)(en.a,{variant:"subtitleLarge",component:"h1",css:cr.itemName},a),Object(d.d)(en.a,{component:"p",variant:"bodySecondary",color:"supportText",css:cr.itemNameSupportText},on()("Dialogue"))),headerRight:!t&&Object(d.d)(l.Fragment,null,k?Object(d.d)(gn.a,{intent:"menu",variant:"ghost",onClick:function(){b(!0)},"aria-label":on()("Dialogue actions"),css:cr.menuButton}):Object(d.d)(Ze.a,{container:!0,justifyContent:"flex-end",alignItems:"center",direction:"row",wrap:"nowrap",css:cr.headerRight,spacing:12},"ACTIVE"===s&&n===De.e.SocraticDialogue&&Object(d.d)(l.Fragment,null,Object(d.d)(Ze.a,{item:!0},Object(d.d)(chat_view_HowAmIDoingButton,{disabled:f})),Object(d.d)(Ze.a,{item:!0},Object(d.d)(chat_view_ImStuckButton,{disabled:f}))),Object(d.d)(Ze.a,{item:!0},Object(d.d)(chat_view_NewChatButton,{disabled:f})))),topBanner:void 0},ia||(ia=Object(d.d)(chat_view_ChatView,null)),Object(d.d)(pn.a,{open:v,onClose:closeActionsDialog,"aria-describedby":"dialog-actions-content",anchor:"right"},Object(d.d)(dr,null,on()("Dialogue actions")),Object(d.d)(lr,{id:"dialog-actions-content"},Object(d.d)(Ze.a,{container:!0,direction:"column",alignItems:"flex-start"},"ACTIVE"===s&&n===De.e.SocraticDialogue&&Object(d.d)(l.Fragment,null,Object(d.d)(chat_view_HowAmIDoingButton,{onClick:closeActionsDialog,style:cr.menuItemButton,disabled:f}),Object(d.d)(chat_view_ImStuckButton,{onClick:closeActionsDialog,style:cr.menuItemButton,disabled:f})),Object(d.d)(chat_view_NewChatButton,{onClick:closeActionsDialog,style:cr.menuItemButton,disabled:f}))))):null},ur=n("JYd8"),mr=Object(ur.a)("ComprehensionCheckIcon",{ltr:{large:function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement("path",{d:"M9.996 18c-.414 0-.767-.147-1.059-.44A1.45 1.45 0 018.5 16.5h3c0 .417-.147.77-.442 1.063A1.456 1.456 0 019.996 18zm-2.24-2.5a.738.738 0 01-.537-.214.714.714 0 01-.219-.532c0-.21.072-.39.215-.535A.719.719 0 017.75 14h4.495c.212 0 .391.072.537.214.146.143.219.32.219.532 0 .21-.072.39-.215.535a.719.719 0 01-.534.219H7.756zM6.687 13a5.355 5.355 0 01-1.99-2.135A6.127 6.127 0 014 8c0-1.667.583-3.083 1.75-4.25C6.917 2.583 8.333 2 10 2c1.667 0 3.083.583 4.25 1.75C15.417 4.917 16 6.333 16 8a6.127 6.127 0 01-.698 2.865A5.355 5.355 0 0113.312 13H6.689zm.48-1.5h5.666a4.49 4.49 0 001.23-1.563A4.442 4.442 0 0014.5 8c0-1.255-.436-2.318-1.308-3.19-.872-.874-1.934-1.31-3.187-1.31s-2.318.436-3.193 1.31C5.938 5.681 5.5 6.744 5.5 8c0 .68.146 1.326.438 1.938A4.489 4.489 0 007.167 11.5z",fill:"currentColor"}))}}},!1),pr=["title","subTitle","headerRightElement"],fr={headerContainer:Object(d.c)(ra||(ra=c()(["\n    position: sticky;\n    top: 0;\n    left: 0;\n    max-height: ","px;\n    height: ","px;\n    width: 100%;\n    padding: var(--cds-spacing-200);\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    border-radius: var(--cds-spacing-150) var(--cds-spacing-150) 0 0;\n    background-color: white;\n  "])),68,68),titleSection:Object(d.c)(oa||(oa=c()(["\n    overflow: hidden;\n\n    "," {\n      width: 75%;\n    }\n  "])),Xe.a.down("sm")),title:Object(d.c)(sa||(sa=c()(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  "]))),closeButtonIcon:Object(d.c)(ca||(ca=c()(["\n    margin-right: var(--cds-spacing-150);\n    color: var(--cds-color-grey-975);\n    border-radius: 50%;\n  "]))),actionButton:Object(d.c)(da||(da=c()(["\n    color: var(--cds-color-grey-975);\n  "]))),header:Object(d.c)(la||(la=c()(["\n    "," {\n      flex-shrink: 1;\n      min-width: 0;\n    }\n  "])),Xe.a.down("sm"))},TunnelVisionMainPanelHeader_TunnelVisionCloseButton=function(e){var n=e.closeButtonIcon,t=e.tooltip,a=e.closeButtonAriaLabel,i=e.onClose;return Object(d.d)(gn.a,{css:fr.closeButtonIcon,component:"button",icon:n||ua||(ua=Object(d.d)(ir.a,null)),size:"medium",variant:"ghost",onClick:i,tooltip:t||on()("Back"),"aria-label":a||on()("Close Tunnel Vision")})},TunnelVisionMainPanelHeader_TunnelVisionMainPanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.headerRightElement,i=w()(e,pr);return Object(d.d)(Ze.a,{container:!0,alignItems:"center",wrap:"nowrap",css:fr.headerContainer},Object(d.d)(Ze.a,{item:!0},Object(d.d)(TunnelVisionMainPanelHeader_TunnelVisionCloseButton,i)),Object(d.d)(Ze.a,{container:!0,item:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header",css:fr.header},Object(d.d)(Ze.a,{item:!0,css:fr.titleSection},Object(d.d)(en.a,{component:"h1",variant:"subtitleLarge",css:fr.title},n),t&&Object(d.d)(en.a,{component:"span",variant:"bodySecondary"},t)),a&&Object(d.d)(Ze.a,{item:!0},a)))},gr={toolbarContainer:function(e){return Object(d.c)(ma||(ma=c()(["\n    height: 100%;\n    min-width: ","px;\n    max-width: ","px;\n    gap: var(--cds-spacing-100);\n    margin-right: var(--cds-spacing-100);\n\n    "," {\n      flex-direction: column;\n      flex-basis: content;\n      flex-grow: ",";\n      min-width: unset;\n      width: unset;\n      max-width: unset;\n      margin-right: 0;\n      gap: 0;\n    }\n  "])),e?400:72,e?400:72,Xe.a.down("sm"),e?1:"unset")},toolbarPanel:Object(d.c)(pa||(pa=c()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    z-index: 2;\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    button {\n      background-color: var(--cds-color-emphasis-neutral-background-xweak);\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n      flex-direction: row;\n      justify-content: center;\n    }\n  "])),72,72,Xe.a.down("sm"),72),tabList:Object(d.c)(fa||(fa=c()(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n    padding: var(--cds-spacing-150) 0;\n\n    "," {\n      flex-grow: 1;\n      flex-direction: row;\n      justify-content: space-around;\n    }\n  "])),Xe.a.down("sm")),toolbarContent:function(e){return Object(d.c)(ga||(ga=c()(["\n    display: ",";\n    height: 100%;\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    background-color: white;\n    border-radius: var(--cds-spacing-150);\n    z-index: 1;\n    width: ","px;\n    min-width: ","px;\n\n    "," {\n      width: 100%;\n      height: calc(100% - ","px);\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),e?"block":"none",300,300,Xe.a.down("sm"),72)},toolbarContentContainer:function(e){return Object(d.c)(ha||(ha=c()(["\n    display: ",";\n    height: 100%;\n  "])),e?"block":"none")}},TunnelVisionToolbar_TunnelVisionToolbar=function(e){var n=e.tools,t=useTunnelVisionToolbarContext_useTunnelVisionToolbarContext(),a=t.selectedTool,i=t.setSelectedTool,r=t.expanded,o=t.setExpanded,s=l.useRef(null),c=n.filter((function(e){return e.enabled})),u=r&&!!c.length,m=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;return Object(d.d)(Ze.a,{"data-testid":"toolbar",container:!0,item:!0,css:[gr.toolbarContainer(u)],direction:"row",wrap:"nowrap",role:"toolbar"},Object(d.d)(Ze.a,{item:!0,css:gr.toolbarContent(u),"data-testid":"toolbar-content"},n.map((function(e){return Object(d.d)("div",{key:e.name,role:"complementary","aria-roledescription":"sidebar",ref:s,tabIndex:-1,"aria-label":on()("Tool container for #{toolName}",{toolName:e.name}),css:gr.toolbarContentContainer(a===e.name)},e.component)}))),Object(d.d)(Ze.a,{item:!0,css:gr.toolbarPanel,role:"complementary","aria-label":on()("Toolbar panel")},Object(d.d)("div",{css:gr.tabList,role:"tablist",tabIndex:0},n.map((function(e){var n=e.name,t=e.icon,s=e.displayName,c=r&&n===a,l=!e.enabled;return Object(d.d)(yn.k,{role:"tab",size:"small",key:n,"aria-label":n,onClick:function(){return function(e){i(e,m),o(a!==e||!r,m)}(n)},icon:t,disabled:l,"data-testid":"tool-button-".concat(n),selected:c,"aria-selected":c},s)})))))},hr={reactModal:Object(d.c)(va||(va=c()(["\n    outline: none;\n  "]))),modalOverlay:Object(d.c)(ba||(ba=c()(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100dvh; /* dvh = device viewport height: required so that on iOS devices elements do not extend beneath browser's interface such as the bottom navigation bar */\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n  "]))),modalContainer:function(e){return Object(d.c)(ka||(ka=c()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n    padding: var(--cds-spacing-200) 0 var(--cds-spacing-200) var(--cds-spacing-200);\n    gap: ",";\n\n    #coursera-coach-item {\n      padding: 0;\n      height: calc(100% - ","px);\n      border-radius: 0 0 var(--cds-spacing-150) var(--cds-spacing-150);\n\n      > div {\n        border-radius: 0;\n      }\n\n      "," {\n        overflow: hidden;\n      }\n    }\n\n    "," {\n      padding: var(--cds-spacing-200) var(--cds-spacing-200) 0;\n      flex-direction: ",";\n      gap: 0;\n    }\n  "])),e?0:"var(--cds-spacing-100)",68,Xe.a.down("sm"),Xe.a.down("sm"),e?"unset":"column")},mainPanel:function(e){return Object(d.c)(Ca||(Ca=c()(["\n    flex-grow: 1;\n    position: relative;\n    "," {\n      display: ",";\n      height: calc(100% - ","px);\n    }\n  "])),Xe.a.down("sm"),e?"none":"block",72)},temporaryDrawer:Object(d.c)(Sa||(Sa=c()(["\n    button {\n      color: var(--cds-color-grey-975);\n    }\n  "]))),closeButtonIcon:Object(d.c)(Oa||(Oa=c()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),globalStyles:function(e){return Object(d.c)(Ia||(Ia=c()(["\n    @keyframes slideIn {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n\n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n\n    .ReactModal__Overlay {\n      opacity: 0;\n      animation: "," ","ms ease-out forwards;\n    }\n\n    .ReactModal__Overlay--after-open {\n      opacity: 1;\n    }\n\n    .ReactModal__Overlay--before-close {\n      opacity: 0;\n    }\n  "])),e?"slideIn":"slideOut",400)}},components_TunnelVision=function(e){var n=e.title,t=e.subTitle,a=e.onClose,i=e.ariaLabel,r=e.headerRightElement,o=e.closeButtonAriaLabel,s=e.closeButtonIcon,c=e.toolbarItems,u=e.children,m=l.useState(!1),p=T()(m,2),f=p[0],g=p[1],h=useTunnelVisionToolbarContext_useTunnelVisionToolbarContext().expanded;l.useEffect((function(){return ar.a.setAppElement("#rendered-content"),g(!0),document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}}),[]);return Object(d.d)(l.Fragment,null,Object(d.d)(d.b,{styles:hr.globalStyles(f)}),Object(d.d)(ar.a,{style:{overlay:{position:"relative",zIndex:4e3}},closeTimeoutMS:400,isOpen:f,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:hr.reactModal},Object(d.d)("div",{css:hr.modalOverlay,"aria-label":i},Object(d.d)("div",{css:hr.modalContainer(h)},Object(d.d)("div",{css:hr.mainPanel(h)},Object(d.d)(TunnelVisionMainPanelHeader_TunnelVisionMainPanelHeader,{title:n,subTitle:t,onClose:function(){g(!1),setTimeout(a,400)},closeButtonIcon:s,closeButtonAriaLabel:o,headerRightElement:r}),u),!!c&&Object(d.d)(TunnelVisionToolbar_TunnelVisionToolbar,{tools:c})))))},vr=n("fdGY"),br={header:Object(d.c)(ya||(ya=c()(["\n    ","\n    justify-content: space-between;\n    width: unset;\n  "])),fr.headerContainer),titleSection:Object(d.c)(wa||(wa=c()(["\n    display: flex;\n    flex-direction: column;\n  "]))),closeButton:Object(d.c)(ja||(ja=c()(["\n    border-radius: 50%;\n  "]))),closeButtonIcon:Object(d.c)(xa||(xa=c()(["\n    color: var(--cds-color-grey-975);\n  "])))},components_TunnelVisionSidePanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.onClose;return Object(d.d)(Ze.a,{container:!0,alignItems:"center",wrap:"nowrap",css:br.header},Object(d.d)(Ze.a,{css:br.titleSection},Object(d.d)(en.a,{component:"h4",variant:"actionPrimary"},n),t&&Object(d.d)(en.a,{component:"span",variant:"bodySecondary"},t)),Object(d.d)(nn.a,{onClick:a,size:"small",variant:"ghost","aria-label":on()("Close #{title} panel",{title:n}),css:br.closeButton},Object(d.d)(vr.a,{size:"medium",title:on()("Close"),css:br.closeButtonIcon})))},kr=n("+H68"),Cr=n("dYbo"),icons_LightBulbIcon=function(e){var n=e.color,t=void 0===n?"#1C1B1F":n,a=e.width,i=void 0===a?24:a,r=e.height,o=void 0===r?24:r;return(l.createElement("svg",{width:i,height:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"lightbulb-icon"},l.createElement("mask",{id:"mask0_3768_45643",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},Ea||(Ea=l.createElement("rect",{width:"24",height:"24",fill:"#D9D9D9"}))),l.createElement("g",{mask:"url(#mask0_3768_45643)"},l.createElement("path",{d:"M12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 19V17H16V19H8ZM8.25 16C7.1 15.3167 6.1875 14.4 5.5125 13.25C4.8375 12.1 4.5 10.85 4.5 9.5C4.5 7.41667 5.22917 5.64583 6.6875 4.1875C8.14583 2.72917 9.91667 2 12 2C14.0833 2 15.8542 2.72917 17.3125 4.1875C18.7708 5.64583 19.5 7.41667 19.5 9.5C19.5 10.85 19.1625 12.1 18.4875 13.25C17.8125 14.4 16.9 15.3167 15.75 16H8.25ZM8.85 14H15.15C15.9 13.4667 16.4792 12.8083 16.8875 12.025C17.2958 11.2417 17.5 10.4 17.5 9.5C17.5 7.96667 16.9667 6.66667 15.9 5.6C14.8333 4.53333 13.5333 4 12 4C10.4667 4 9.16667 4.53333 8.1 5.6C7.03333 6.66667 6.5 7.96667 6.5 9.5C6.5 10.4 6.70417 11.2417 7.1125 12.025C7.52083 12.8083 8.1 13.4667 8.85 14Z",fill:t}))))},Sr={hintContainer:Object(d.c)(Na||(Na=c()(["\n    background-color: var(--cds-color-white-0);\n    border-radius: var(--cds-border-radius-200);\n    border: 1px solid var(--cds-color-grey-50);\n    padding: var(--cds-spacing-150) var(--cds-spacing-200);\n    transition: all 0.2s ease-in-out;\n\n    "," {\n      width: 100%;\n    }\n  "])),Xe.a.down("sm")),hintHeader:Object(d.c)(_a||(_a=c()(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    justify-content: space-between;\n    gap: var(--cds-spacing-100);\n  "]))),titleWrapper:Object(d.c)(Aa||(Aa=c()(["\n    display: flex;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n  "]))),title:function(e){return Object(d.c)(Ta||(Ta=c()(["\n    color: ",";\n  "])),e?"var(--neutral-primary, var(--cds-color-grey-975))":"var(--neutral-primary-content-weak, var(--cds-color-grey-700))")},content:Object(d.c)(Ma||(Ma=c()(["\n    margin-top: var(--cds-spacing-150);\n  "]))),actionBar:Object(d.c)(Ra||(Ra=c()(["\n    display: flex;\n    justify-content: end;\n    align-items: center;\n  "])))},hints_HintMessage=function(e){var n,t=e.title,a=e.hintMessage,i=e.hintMessageId,r=e.defaultUserFeedback,o=useRolePlayHintContext_useRolePlayHintContext(),s=o.expandedHintMessages,c=o.setExpandedHintMessages,u=null!==(n=null==s?void 0:s[i])&&void 0!==n&&n,toggleExpanded=function(){c(B()(B()({},s),{},L()({},i,!u)))},m=l.useState(null!=r?r:Y.a.unset),p=T()(m,2),f=p[0],g=p[1];return Object(d.d)(Ze.a,{css:Sr.hintContainer},Object(d.d)(Ze.a,{role:"button",css:Sr.hintHeader,"aria-expanded":u,onClick:toggleExpanded,tabIndex:0,"aria-controls":"hint-content-".concat(t),onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleExpanded())}},Object(d.d)(Ze.a,{css:Sr.titleWrapper},Object(d.d)(icons_LightBulbIcon,{color:u?"#1C1B1F":"#404B61",height:16,width:16}),Object(d.d)(en.a,{component:"span",variant:"actionSecondary",css:Sr.title(u)},t)),u?Fa||(Fa=Object(d.d)(kr.a,null)):Pa||(Pa=Object(d.d)(Cr.a,null))),u&&Object(d.d)(l.Fragment,null,Object(d.d)(Ze.a,{css:Sr.content},Object(d.d)(en.a,{id:"hint-content-".concat(t),component:"div",variant:"bodyPrimary",color:"emphasis.neutral"},a)),Object(d.d)(Ze.a,{css:Sr.actionBar},Object(d.d)(K.d,{message:{text:a,customId:i,sender:Y.c.RESPONSE,userFeedback:f},onFeedbackSelect:g}))))},Or={panel:Object(d.c)(La||(La=c()(["\n    background: var(--cds-color-white-0);\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: calc(100% - ","px);\n  "])),68),hintsList:Object(d.c)(Da||(Da=c()(["\n    display: flex;\n    flex-direction: column;\n    gap: var(--cds-spacing-150);\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin: 0 var(--cds-spacing-50);\n    padding: var(--cds-spacing-200);\n    margin-bottom: auto;\n  "]))),askForHintButton:Object(d.c)(Ba||(Ba=c()(["\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "]))),emptyState:Object(d.c)(Ha||(Ha=c()(["\n    width: 300px;\n    padding-top: var(--cds-spacing-200);\n    padding-left: var(--cds-spacing-200);\n    padding-right: var(--cds-spacing-200);\n  "]))),loadingCard:Object(d.c)(Va||(Va=c()(["\n    padding: var(--cds-spacing-300) var(--cds-spacing-200);\n  "])))},HintsPanel_AskHintButton=function(e){var n=e.onClick,t=e.disabled,a=e.loading;return Object(d.d)(yn.b,{size:"small",variant:"secondary",onClick:n,css:Or.askForHintButton,disabled:t,loading:a},on()("Ask for a hint"))},HintsPanel_HintsPanelContent=function(e){var n=e.canAskForHint,t=useRolePlayHintContext_useRolePlayHintContext(),a=t.requestNewHint,i=t.hints,r=t.isLoadingNewHint,o=t.isLoadingExistingHints,s=t.error,c=t.courseId,u=t.itemId,m=t.expandedHintMessages,p=t.setExpandedHintMessages,f=l.useRef(void 0),g=l.useRef(null),h=l.useRef(null),v=Object(tn.e)(),b="NO_MESSAGES"===(null==s?void 0:s.type),k=r||o,C=i&&i.length>0,S=(null==i?void 0:i.length)||0,O=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;Object(l.useEffect)((function(){var e=utils_getTunnelVisionState(O);O&&null!=e&&e.expandedHintMessages&&p(null==e?void 0:e.expandedHintMessages)}),[O,p]),l.useEffect((function(){var e,n;g.current&&(null===(e=(n=g.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[S]),l.useEffect((function(){var e,n;h.current&&(null===(e=(n=h.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[r]);var I=function(){var e=N()(x()().mark((function _callee(){var e;return x()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_GENERATE_HINT",coach:{mode:R.g.CoachItem},product:{type:"course",id:c},courseItem:{id:u}}),n.next=3,a();case 3:(e=n.sent)&&e.length>0&&(f.current=e[e.length-1].messageId,p(B()(B()({},m),{},L()({},f.current,!0))));case 5:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return!i&&b?Object(d.d)("div",null,Object(d.d)(en.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Or.emptyState},on()('Something went wrong, please try again by clicking “Ask for a hint"')),Object(d.d)(HintsPanel_AskHintButton,{onClick:I,disabled:!n,loading:k})):C?Object(d.d)("div",{css:Or.panel},Object(d.d)("div",{css:Or.hintsList},i.map((function(e,n){var t=e.messageId===f.current;return Object(d.d)("div",{key:e.messageId,ref:t?g:null},Object(d.d)(hints_HintMessage,{title:on()("Hint #{index}",{index:n+1}),hintMessage:e.message,hintMessageId:e.messageId,defaultUserFeedback:e.userFeedback}))})),r&&Object(d.d)("div",{css:[Sr.hintContainer,Or.loadingCard],ref:h},Ua||(Ua=Object(d.d)(vi.a,{variant:"text"})),qa||(qa=Object(d.d)(vi.a,{variant:"text"})),za||(za=Object(d.d)(vi.a,{variant:"text"})))),Object(d.d)("div",{"data-testid":"hints-footer"},Ga||(Ga=Object(d.d)(vn.a,null)),Object(d.d)(HintsPanel_AskHintButton,{onClick:I,disabled:!n,loading:k}))):Object(d.d)("div",{css:Or.panel},Object(d.d)("div",{"data-testid":"hints-empty-state"},Object(d.d)(en.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Or.emptyState},on()("No hints here yet! When things get tricky, hints can point you in the right direction.")),Object(d.d)(HintsPanel_AskHintButton,{onClick:I,disabled:!n,loading:k})))},hints_HintsPanel=function(e){var n=e.canAskForHint,t=e.onClose,a=useRolePlayHintContext_useRolePlayHintContext(),i=a.loadHints,r=a.hints,o=a.resetHintsChatSession,s=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;return l.useEffect((function(){s&&i(),r&&!s&&o()}),[s]),Object(d.d)(l.Fragment,null,Object(d.d)(components_TunnelVisionSidePanelHeader,{title:on()("Hints"),subTitle:on()("#{itemsCount} received",{itemsCount:(null==r?void 0:r.length)||0}),onClose:t}),Object(d.d)(HintsPanel_HintsPanelContent,{canAskForHint:n}))},icons_TaskIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-grey-950)":n,a=e.width,i=void 0===a?24:a,r=e.height,o=void 0===r?24:r;return(l.createElement("svg",{width:i,fill:t,height:o,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},l.createElement("mask",{id:"mask0_6366_5843",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},Wa||(Wa=l.createElement("rect",{width:"16",height:"16",fill:"#D9D9D9"}))),Ya||(Ya=l.createElement("g",{mask:"url(#mask0_6366_5843)"},l.createElement("path",{d:"M10.3333 13.2837L7.5 10.4503L8.43333 9.51699L10.3333 11.417L14.1 7.65033L15.0333 8.58366L10.3333 13.2837ZM14 6.66699H12.6667V3.33366H11.3333V5.33366H4.66667V3.33366H3.33333V12.667H7.33333V14.0003H3.33333C2.96667 14.0003 2.65278 13.8698 2.39167 13.6087C2.13056 13.3475 2 13.0337 2 12.667V3.33366C2 2.96699 2.13056 2.6531 2.39167 2.39199C2.65278 2.13088 2.96667 2.00033 3.33333 2.00033H6.11667C6.23889 1.61144 6.47778 1.29199 6.83333 1.04199C7.18889 0.791992 7.57778 0.666992 8 0.666992C8.44444 0.666992 8.84167 0.791992 9.19167 1.04199C9.54167 1.29199 9.77778 1.61144 9.9 2.00033H12.6667C13.0333 2.00033 13.3472 2.13088 13.6083 2.39199C13.8694 2.6531 14 2.96699 14 3.33366V6.66699ZM8 3.33366C8.18889 3.33366 8.34722 3.26977 8.475 3.14199C8.60278 3.01421 8.66667 2.85588 8.66667 2.66699C8.66667 2.4781 8.60278 2.31977 8.475 2.19199C8.34722 2.06421 8.18889 2.00033 8 2.00033C7.81111 2.00033 7.65278 2.06421 7.525 2.19199C7.39722 2.31977 7.33333 2.4781 7.33333 2.66699C7.33333 2.85588 7.39722 3.01421 7.525 3.14199C7.65278 3.26977 7.81111 3.33366 8 3.33366Z"})))))},Ir={completedTask:Object(d.c)(Ka||(Ka=c()(["\n    display: flex;\n    gap: var(--cds-spacing-100);\n    color: var(--cds-color-green-700);\n    text-decoration: line-through;\n  "]))),taskItemContainer:Object(d.c)(Qa||(Qa=c()(["\n    margin-left: 0;\n    gap: var(--cds-spacing-50);\n    width: 100%;\n\n    &:not(:last-of-type) {\n      margin-bottom: var(--cds-spacing-50);\n    }\n  "]))),bulletStyle:Object(d.c)(Ja||(Ja=c()(["\n    padding: unset !important;\n    padding-top: var(--cds-spacing-50) !important;\n    font-size: 24px;\n    color: var(--cds-color-grey-100);\n  "]))),taskItem:Object(d.c)($a||($a=c()(["\n    margin: 0;\n    flex: 1;\n    padding: var(--cds-spacing-50) 0 !important;\n  "]))),iconContainer:Object(d.c)(Xa||(Xa=c()(["\n    width: var(--cds-spacing-300);\n  "])))},TaskItem_CompletedTaskItem=function(e){var n=e.task;return Object(d.d)("div",{css:Ir.completedTask},Object(d.d)("div",{css:Ir.iconContainer},Za||(Za=Object(d.d)(cn.a,{size:"medium",color:"success"}))),Object(d.d)(en.a,{"data-testid":"completed-task-".concat(n.title),component:"p",variant:"bodySecondary",color:"success"},n.title))},TaskItem_LoadingTaskItem=function(){return Object(d.d)(Ze.a,{container:!0,spacing:8,css:Ir.taskItemContainer},Object(d.d)(Ze.a,{item:!0,css:Ir.bulletStyle},Object(d.d)("div",{css:Ir.iconContainer},"•")),Object(d.d)(Ze.a,{item:!0,css:Ir.taskItem},ei||(ei=Object(d.d)(vi.a,{height:32,"data-testid":"loading-screen"}))))},TaskItem_TaskItem=function(e){var n=e.task;return Object(d.d)(Ze.a,{container:!0,spacing:12,css:Ir.taskItemContainer},Object(d.d)(Ze.a,{item:!0,css:Ir.bulletStyle},Object(d.d)("div",{css:Ir.iconContainer},"•")),Object(d.d)(Ze.a,{item:!0,css:Ir.taskItem},Object(d.d)(en.a,{key:n.id,"data-testid":"todo-task-".concat(n.title),component:"span",variant:"bodySecondary",color:"supportText"},n.title)))},yr={taskPanelContent:Object(d.c)(ni||(ni=c()(["\n    display: flex;\n    flex-direction: column;\n    padding: var(--cds-spacing-200);\n    gap: var(--cds-spacing-100);\n  "]))),loadingTaskItemContainer:Object(d.c)(ti||(ti=c()(["\n    padding: var(--cds-spacing-200);\n  "])))},TaskPanelContent_TaskPanelContent=function(e){var n=e.todoTasks,t=e.completedTasks;if(e.isLoading)return Object(d.d)("div",{css:yr.loadingTaskItemContainer,"data-testid":"task-loading"},ai||(ai=Object(d.d)(TaskItem_LoadingTaskItem,null)),ii||(ii=Object(d.d)(TaskItem_LoadingTaskItem,null)),ri||(ri=Object(d.d)(TaskItem_LoadingTaskItem,null)),oi||(oi=Object(d.d)(TaskItem_LoadingTaskItem,null)));var a=n.length>0&&t.length>0;return Object(d.d)("div",{css:yr.taskPanelContent,"data-testid":"task-list"},n.map((function(e){return Object(d.d)(l.Fragment,{key:e.id},Object(d.d)(TaskItem_TaskItem,{task:e}))})),a&&(si||(si=Object(d.d)(vn.a,null))),t.map((function(e){return Object(d.d)(l.Fragment,{key:e.id},Object(d.d)(TaskItem_CompletedTaskItem,{task:e}))})))},tasks_TaskPanel=function(e){var n=e.onClose,t=useRolePlayTasksContext_useRolePlayTasksContext(),a=t.tasks,i=t.isTaskListLoading,r=t.loadTaskList,o=t.setShouldSkipChatHistory,s=t.taskChatSessionId,c=t.resetTaskChatSession,u=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId,m=(a||[]).filter((function(e){return e.completed})),p=(a||[]).filter((function(e){return!e.completed}));return l.useEffect((function(){s&&!u&&c(),u&&(r(u),o(!1))}),[u,s]),Object(d.d)(l.Fragment,null,Object(d.d)(components_TunnelVisionSidePanelHeader,{title:on()("Tasks"),subTitle:on()("#{completedTasksCount}/#{totalTasksCount} complete",{completedTasksCount:m.length,totalTasksCount:m.length+p.length}),onClose:n}),Object(d.d)(TaskPanelContent_TaskPanelContent,{todoTasks:p,completedTasks:m,isLoading:i}))},chat_view_RolePlayChatViewTunnelVision=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.itemName,t=e.setChatIsOpen,a=e.chatIsOpen,i=e.rolePlaySimulationSessionId,r=e.rolePlayDebriefSessionId,o=useTunnelVisionToolbarContext_useTunnelVisionToolbarContext(),s=o.setExpanded,c=o.setSelectedTool,u=useRolePlayHintContext_useRolePlayHintContext().resetHintsChatSession,m=useRolePlayTasksContext_useRolePlayTasksContext(),p=m.resetTaskChatSession,f=m.isTaskResponseLoading,g=Object(tn.e)();if(Object(l.useEffect)((function(){var e=utils_getTunnelVisionState(i)||{},n=e.toolbarExpanded,t=e.selectedTool;n&&(s(!0,i),c(t||"tasks",i))}),[i]),!a)return null;return Object(d.d)(components_TunnelVision,{title:n,subTitle:on()("Role-play"),onClose:function(){g("click_button",{button:{name:"coach_item_tv_back_button"}}),t(!1)},ariaLabel:on()("Role-play"),headerRightElement:Object(d.d)(chat_view_NewChatButton,{useIconButton:!0,onConfirm:function(){s(!1,i),c("tasks",i),u(),p(),c("tasks",i),s(!1,i),utils_clearTunnelVisionState(i)}}),closeButtonAriaLabel:on()("Close role-play"),toolbarItems:[{name:"tasks",displayName:on()("Tasks"),icon:ci||(ci=Object(d.d)(icons_TaskIcon,null)),component:Object(d.d)(tasks_TaskPanel,{onClose:function(){s(!1,i)}}),enabled:!!i},{name:"hints",displayName:on()("Hints"),icon:di||(di=Object(d.d)(mr,null)),component:Object(d.d)(hints_HintsPanel,{canAskForHint:!r,onClose:function(){s(!1,i)}}),enabled:!!i}]},Object(d.d)(chat_view_ChatView,{onStartButtonClick:function(e){c("tasks",e),s(!0,e)},isTaskResponseLoading:f}))},wr=Object(h.b)(Object(O.a)(["CourseStore"],(function(e){return{courseMaterial:e.CourseStore.getMaterials()}})))((function(e){var n,t=e.computedItem,a=e.markComplete,i=e.markStarted,r=e.configuration,o=e.courseMaterial,s=e.refreshCompletedStatus,c=e.courseBranchId,d=t.id,u=t.name,m=t.courseId,p=t.isStarted,f=t.isCompleted,g=null==r?void 0:r.coverPageInstructions,h=null==r?void 0:r.versionedCoachItemType,v=parseInt(h.split("@")[1],10),k=Object(S.m)(h),C=null===(n=r.promptParameters)||void 0===n?void 0:n[De.f.aiPersonaRole],O=o.getItemMetadata(d),y=o.getNeighboringNavigationItems(O).next,w=null==y?void 0:y.getLink();return l.useEffect((function(){var e=Object(b.b)(),n=e.external_id,t=e.is_staff;I.b.init({visitor:{id:n,isCourserian:Object(b.d)(),isStaff:t}},I.a)}),[]),l.createElement(useCoachItemChatContext_CoachItemChatContextProvider,{courseId:m,courseBranchId:c,itemId:d,itemName:u,nextItemLink:w,coachItemType:k,rolePlayAiPersonaTitle:C,onCloseChat:s},l.createElement(components_CoverPage,{instructions:g,isCompleted:f,isStarted:p,markStarted:i,markComplete:a,promptVersion:v}),k===De.e.SocraticDialogue&&(li||(li=l.createElement(chat_view_DialogueChatViewTunnelVision,null))),k===De.e.RolePlay&&l.createElement(useTunnelVisionToolbarContext_TunnelVisionToolbarProvider,null,l.createElement(useRolePlayTasksContext_RolePlayTasksContextProvider,{courseId:m,itemId:d,courseBranchId:c},l.createElement(useRolePlayHintContext_RolePlayHintContextProvider,{courseId:m,itemId:d,courseBranchId:c},ui||(ui=l.createElement(chat_view_RolePlayChatViewTunnelVision,null))))))})),jr=n("YmkS"),xr=n("pnKK"),Er=n("q5zD"),Nr=n("15pW"),_r=n("v6sC"),Ar=Object(_r.a)("/api/onDemandWidgetProgress.v1",{type:"rest"}),Tr={markComplete:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Completed"}},r=[t,n,e].join("~");return g()(Ar.put(r,i))},markStarted:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Started"}},r=[t,n,e].join("~");return g()(Ar.put(r,i))}},Mr=Tr,Rr=n("k4cE"),Fr=n("E4RX"),WidgetItemActions_refreshProgress=function(e,n,t,a,i){t.setState(n),e.executeAction(Fr.b,{courseProgress:a}),i&&e.executeAction(Rr.a,{courseSlug:i,refetch:!0})},WidgetItemActions_markItemComplete=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId,c=n.courseSlug;return Mr.markComplete(t,a,i,s).then(WidgetItemActions_refreshProgress(e,Nr.d.progressCompleted,r,o,c))},WidgetItemActions_markItemStarted=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId;return Mr.markStarted(t,a,i,s).then(WidgetItemActions_refreshProgress(e,Nr.d.progressStarted,r,o))},Pr=n("++Ya"),Lr=n("PStO"),Dr=n("47Qj"),hooks_useWidgetSession=function(e,n,t,a){var i=Object(b.b)().id,r=Object(Pr.c)([i.toString(),e,n]),o=Object(Lr.c)((function(){return t?{}:a?{widgetSessionWithoutProgressUpdate:Dr.a.finder("getWithoutProgressUpdate",{fields:["session","sessionId"],params:{id:r}})}:{widgetSession:Dr.a.get(r,{fields:["session","sessionId"]})}}),[r]).data,s=o.widgetSession,c=o.widgetSessionWithoutProgressUpdate;return null!=s?s:null==c?void 0:c[0]},isCompatibleWithMobile=function(e){var n=e.supportsTouch,t=e.minWidthPx,a=e.minHeightPx,i=function(){var e,n;if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.screen;if(void 0!==window.screen)e=t.height,n=t.width;else e=window.innerHeight,n=window.innerWidth}else e=0,n=0;return{deviceHeight:e,deviceWidth:n}}(),r=i.deviceWidth,o=i.deviceHeight;return!1!==n&&(!(void 0!==t&&t>r)&&!(void 0!==a&&a>o))},Br=n("z3RS"),Hr=n("kvW3"),Vr=(n("46xw"),"".concat(En.a.url.resource_assets,"widget/svgcomputer.svg")),Ur=function(e){function UnavailableOnMobileMessage(){return e.apply(this,arguments)||this}return o()(UnavailableOnMobileMessage,e),UnavailableOnMobileMessage.prototype.render=function(){var e=this.props.name;return(l.createElement("div",{className:"rc-UnavailableOnMobileMessage vertical-box align-items-absolute-center"},l.createElement("div",{className:"headline-5-text p-x-1"},e),l.createElement("div",{className:"body-1-text p-x-1 p-b-2"},l.createElement(Hr.b,{message:ln()("This item was not designed for use on a small screen.")})),l.createElement("div",{className:"align-horizontal-center p-b-2"},l.createElement("img",{className:"computer-icon",src:Vr,alt:ln()("Computer Icon"),height:"120",width:"220"})),l.createElement("div",{className:"body-1-text horizontal-box align-horizontal-center p-x-1"},l.createElement(Hr.b,{message:ln()("Please use a computer or laptop to complete this item.")}))))},UnavailableOnMobileMessage}(l.Component),qr=n("Jz+x"),zr=n("TdzE"),Gr=n("2Kkf"),Wr=n("p3Do"),Yr=n("emlC"),Kr=n("35G5"),Qr=n("/AOU"),Jr=n("w/Ge"),$r={widgetItem:Object(d.c)(mi||(mi=c()(["\n    margin: 20px auto;\n    max-width: 960px;\n\n    @media (max-width: 768px) {\n      margin: 0;\n      max-width: 100%;\n    }\n  "])))},Xr=[Qr.c.SET_COMPLETE],Zr=function(e){function WidgetItem(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).state={iFrameMessages:[],widgetId:Object(Jr.b)(),itemProgressState:null,markCompleteDeferred:null,isExpanded:!1},n.onReceiveMessage=function(e){var t=n.state.iFrameMessages;if(t.push(e),n.setState({iFrameMessages:t}),e.type===Qr.c.SET_COMPLETE){n.markComplete();var a=g.a.defer();return n.setState({markCompleteDeferred:a}),a.promise}return g()()},n.onToggleExpanded=function(){return n.setState((function(e){return{isExpanded:!e.isExpanded}}))},n.markComplete=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=e.courseSlug,s=t.getItemProgress(a.id),c=b.a.get().id,d=a.id;Wr.d(t.get("id"),t),n.context.executeAction(WidgetItemActions_markItemComplete,{itemId:d,courseId:i,userId:c,itemProgress:s,courseProgress:t,sessionId:r,courseSlug:o})},n.markStarted=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=t.getItemProgress(a.id),s=b.a.get().id,c=a.id;n.context.executeAction(WidgetItemActions_markItemStarted,{itemId:c,courseId:i,userId:s,itemProgress:o,courseProgress:t,sessionId:r})},n.isOnMobile=function(){var e=n.context.getStore("ApplicationStore").getUserAgent(),t=e&&e.isMobileBrowser;return v.a.get()||t},n}o()(WidgetItem,e);var n=WidgetItem.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var n=this.props,t=n.computedItem,a=n.computedCourseProgress.courseProgress.getItemProgress(t.id);a.getState()!==this.state.itemProgressState&&(this.setState({itemProgressState:a.getState()}),this.state.markCompleteDeferred&&(this.state.markCompleteDeferred.resolve(),this.setState({markCompleteDeferred:null})))},n.render=function(){var e,n=this,t=this.props,a=t.session,i=t.sessionId,r=t.computedItem,o=t.courseBranchId,s=t.itemMetadata,c=t.courseMaterials,l=null==c?void 0:null===(e=c.getNeighbors(s))||void 0===e?void 0:e.nextItemMetadataOrItemGroup,u=this.state.isExpanded;return a?this.isOnMobile()&&!isCompatibleWithMobile(r.contentSummary.definition)?Object(d.d)(Ur,{name:r.name}):Object(d.d)("div",{css:$r.widgetItem},Object(d.d)(k.a,{component:"h1",className:"rc-A11yScreenReaderOnly"},r.name),Object(d.d)(xr.a,{courseId:r.courseId,show:!0}),Object(d.d)(Br.a,{itemName:r.name,itemMetadata:s,courseId:r.courseId}),Object(S.l)(a.iframeTitle)?Object(d.d)(wr,{computedItem:r,configuration:a.configuration.data,markComplete:this.markComplete,markStarted:this.markStarted,refreshCompletedStatus:this.props.refreshCourseProgress,courseBranchId:o}):Object(d.d)(Kr.a,{inWidgetItem:!0,session:a,sessionId:i,onToggleExpanded:this.onToggleExpanded,widgetId:this.state.widgetId,parentRpcActions:Xr,isComplete:r.isCompleted,widgetContentTitle:r.name,nextItem:l,markComplete:function(){n.markComplete()}}),Object(d.d)(C.b,{"aria-hidden":u,style:{marginTop:"50px",borderTop:"1px solid #ddd",paddingTop:"15px",paddingBottom:"15px"}},Object(d.d)(jr.a,{computedItem:r,itemFeedbackType:"widget"}))):pi||(pi=Object(d.d)("div",{className:"horizontal-box align-items-absolute-center widget-iframe"},Object(d.d)(Er.a,{name:"spinner",size:"2x",spin:!0,className:"color-hint-text"})))},WidgetItem}(l.Component);Zr.contextTypes={executeAction:p.a.func.isRequired,getStore:p.a.func.isRequired};var eo=Object(h.b)(Object(zr.b)(),Object(qr.a)(),Object(Yr.a)(["CourseStore","SessionStore"],(function(e){var n=e.CourseStore,t=e.SessionStore;return{courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),courseMaterials:n.getMaterials(),courseBranchId:t.getBranchId()}})),Gr.a)((function(e){var n=e.computedItem,t=n.courseId,a=n.id,r=hooks_useWidgetSession(t,a);return Object(d.d)(Zr,i()({},e,{session:null==r?void 0:r.session,sessionId:null==r?void 0:r.sessionId}))}));e.default=eo},ZGIP:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachLectureItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"lectureDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachLectureItem on AiCoach_LectureItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  lectureDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachLectureItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachLectureItem")},"b+Bk":function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreateUserMessageResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messageByAiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatSessionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreateUserMessageResult"},directives:[]}]}}]}}],loc:{start:0,end:929}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment CreateUserMessageResult on AiCoach_CreateUserMessageAndReturnResponseResult {\n  messageByAiCoach {\n    message\n    senderType\n    messageId\n  }\n  chatSessionId\n  session {\n    id\n    status\n  }\n  recommendedActions @include(if: $recommendedActionsEnabled) {\n    action\n    actionMessage\n  }\n  clipRecommendations @include(if: $clipRecommendationsEnabled) {\n    ...AiCoachClipRecommendations\n  }\n  navigationButtons {\n    navigationLeadingMessage\n\n    ...GoToFirstItemNavigationButton\n  }\n}\n\nmutation AiCoach_CreateUserMessageAndReturnResponse(\n  $input: AiCoach_CreateUserMessageAndReturnResponseInput!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach_CreateUserMessageAndReturnResponse(input: $input) {\n    ...CreateUserMessageResult\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wjFw").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.CreateUserMessageResult=oneQuery(n,"CreateUserMessageResult"),module.exports.AiCoach_CreateUserMessageAndReturnResponse=oneQuery(n,"AiCoach_CreateUserMessageAndReturnResponse")},j5nu:function(module,exports,e){},uSn8:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachNavigationButtons"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_NavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}],loc:{start:0,end:195}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n\nfragment AiCoachNavigationButtons on AiCoach_NavigationButton {\n  navigationLeadingMessage\n\n  ...GoToFirstItemNavigationButton\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wjFw").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachNavigationButtons=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachNavigationButtons")},wBc2:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ItemMetadataFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]}]}}],loc:{start:0,end:100}};e.loc.source={body:"fragment ItemMetadataFields on AiCoach_ItemMetadata {\n  course {\n    slug\n  }\n  itemId\n  itemSlug\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.ItemMetadataFields=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"ItemMetadataFields")},wjFw:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GoToFirstItemNavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemMetadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GenericItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachLectureItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachReadingItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_QuizItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_AssignmentItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:715}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachReadingItemFragment.graphql"\n#import "./aiCoachLectureItemFragment.graphql"\n\nfragment GoToFirstItemNavigationButton on AiCoach_GoToFirstItemNavigationButton {\n  itemMetadata {\n    ... on AiCoach_GenericItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n    }\n    ... on AiCoach_LectureItemMetadata {\n      ...AiCoachLectureItem\n    }\n    ... on AiCoach_ReadingItemMetadata {\n      ...AiCoachReadingItem\n    }\n    ... on AiCoach_QuizItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n    ... on AiCoach_AssignmentItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("RNb2").definitions)),n.definitions=n.definitions.concat(unique(e("ZGIP").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.GoToFirstItemNavigationButton=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"GoToFirstItemNavigationButton")},wuXY:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachMessageCourse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Course_Course"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}],loc:{start:0,end:70}};e.loc.source={body:"fragment AiCoachMessageCourse on Course_Course {\n  id\n  slug\n  name\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoachMessageCourse=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoachMessageCourse")},xeAZ:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MessagesByChatIdResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userFeedback"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userComments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"courseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"structuredResponse"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachNavigationButtons"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryByChatSessionId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"chatSessionId"},value:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MessagesByChatIdResult"},directives:[]}]}}]}}]}}],loc:{start:0,end:1052}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachNavigationButtonsFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment MessagesByChatIdResult on AiCoach_ChatMessagesPaginatedResult {\n  session {\n    id\n    status\n  }\n  pagination {\n    totalElements\n    cursor\n  }\n  elements {\n    userFeedback\n    userComments\n    senderType\n    message\n    itemId\n    createdAt\n    courseId\n    id\n    structuredResponse\n    recommendedActions @include(if: $recommendedActionsEnabled) {\n      actionMessage\n      action\n    }\n    clipRecommendations @include(if: $clipRecommendationsEnabled) {\n      ...AiCoachClipRecommendations\n    }\n    navigationButtons {\n      ...AiCoachNavigationButtons\n    }\n  }\n}\n\nquery AiCoach_ChatMessagesPaginatedResult(\n  $chatSessionId: ID!\n  $limit: Int!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach {\n    queryByChatSessionId(chatSessionId: $chatSessionId, limit: $limit) {\n      ...MessagesByChatIdResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("uSn8").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.MessagesByChatIdResult=oneQuery(n,"MessagesByChatIdResult"),module.exports.AiCoach_ChatMessagesPaginatedResult=oneQuery(n,"AiCoach_ChatMessagesPaginatedResult")}}]);
//# sourceMappingURL=59.8dc9e3fcb800623caf54.js.map